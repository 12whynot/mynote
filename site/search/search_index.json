{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"2024-01-16/","title":"2024 01 16","text":"<p>CONFIG_SUNXI_HOMLET</p>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/","title":"C++\u5185\u5b58\u5e03\u5c40","text":"<p>Visual Studio\uff1a\u5148\u9009\u62e9\u5de6\u4fa7\u7684C/C++-&gt;\u547d\u4ee4\u884c\uff0c\u7136\u540e\u5728\u5176\u4ed6\u9009\u9879\u8fd9\u91cc\u5199\u4e0a/d1 reportAllClassLayout\uff0c\u5b83\u53ef\u4ee5\u770b\u5230\u6240\u6709\u76f8\u5173\u7c7b\u7684\u5185\u5b58\u5e03\u5c40\uff0c\u5982\u679c\u5199\u4e0a/d1 reportSingleClassLayoutXXX\uff08XXX\u4e3a\u7c7b\u540d\uff09\uff0c\u5219\u53ea\u4f1a\u6253\u51fa\u6307\u5b9a\u7c7bXXX\u7684\u5185\u5b58\u5e03\u5c40</p>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_1","title":"\u4e00\u3001\u65e0\u7ee7\u627f","text":""},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#11","title":"1.1\u00a0\u65e0\u865a\u51fd\u6570","text":"<pre><code>class Base\n{\nprivate:\n\n    char c_a;\n\n    static char c_b;\n\n    int i_a;\n\n    static int i_b;\n\n    float f_a;\n\n    static float f_b;\n\n    double d_a;\n\npublic:\n\n    void fun_1() {}\n\n};\n</code></pre>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_2","title":"\u5e03\u5c40\uff1a","text":"<pre><code>1&gt;class Base size(24):\n\n1&gt; +---\n\n1&gt; 0 | c_a\n\n1&gt; \u00a0 | &lt;alignment member&gt; (size=3)\n\n1&gt; 4 | i_a\n\n1&gt; 8 | f_a\n\n1&gt; \u00a0 | &lt;alignment member&gt; (size=4)\n\n1&gt;16 | d_a\n\n1&gt;\u00a0+---\n</code></pre> <p>*\u00a0\u666e\u901a\u7684\u53d8\u91cf\u00a0\uff1a\u662f\u8981\u5360\u7528\u5185\u5b58\u7684\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u5bf9\u9f50\u539f\u5219</p> <ul> <li> <p>static\u4fee\u9970\u7684\u9759\u6001\u53d8\u91cf\u00a0\uff1a\u4e0d\u5360\u7528\u5185\u5bb9\uff0c\u539f\u56e0\u662f\u7f16\u8bd1\u5668\u5c06\u5176\u653e\u5728\u5168\u5c40\u53d8\u91cf\u533a</p> </li> <li> <p>\u6210\u5458\u51fd\u6570\u4e0d\u5360\u7528\u5177\u4f53\u7c7b\u5bf9\u8c61\u5185\u5b58\u7a7a\u95f4\uff0c\u6210\u5458\u51fd\u6570\u5b58\u5728\u4ee3\u7801\u533a</p> </li> <li> <p>\u6570\u636e\u6210\u5458\u7684\u8bbf\u95ee\u7ea7\u522b\u5e76\u4e0d\u5f71\u54cd\u5176\u5728\u5185\u5b58\u7684\u6392\u5e03\u548c\u5927\u5c0f\uff0c\u5747\u662f\u6309\u7167\u58f0\u660e\u7684\u987a\u5e8f\u5728\u5185\u5b58\u4e2d\u6709\u5e8f\u6392\u5e03\uff0c\u5e76\u9002\u5f53\u5bf9\u9f50</p> </li> </ul>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#12","title":"1.2\u00a0\u6709\u865a\u51fd\u6570","text":"<pre><code>class Base\n\n{\nprivate:\n\n    char c_a;\n\n    static char c_b;\n\n    int i_a;\n\n    static int i_b;\n\n    float f_a;\n\n    static float f_b;\n\n    double d_a;\n\npublic:\n\n    void fun_1() {}\n\n    virtual void vfun_1() {}\n\n    virtual void vfun_2() {}\n\n};\n</code></pre>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_3","title":"\u5e03\u5c40\uff1a","text":"<pre><code>1&gt;class Base size(32):\n\n1&gt; +---\n\n1&gt; 0 | {vfptr}\n\n1&gt; 8 | c_a\n\n1&gt; \u00a0 | &lt;alignment member&gt; (size=3)\n\n1&gt;12 | i_a\n\n1&gt;16 | f_a\n\n1&gt; \u00a0 | &lt;alignment member&gt; (size=4)\n\n1&gt;24 | d_a\n\n1&gt; +---\n\n1&gt;Base::$vftable@:\n\n1&gt; | &amp;Base_meta\n\n1&gt; | \u00a00\n\n1&gt; 0 | &amp;Base::vfun_1\n\n1&gt; 1 | &amp;Base::vfun_2\n\n1&gt;Base::vfun_1 this adjustor: 0\n\n1&gt;Base::vfun_2 this adjustor: 0\n\n</code></pre>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_4","title":"\u4e8c\u3001\u5355\u4e00\u7ee7\u627f","text":""},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#21","title":"2.1 \u65e0\u865a\u51fd\u6570","text":"<pre><code>class\u00a0Base\n\n{\n\nprivate:\n\n    char\u00a0c_a;\n\n    static\u00a0char\u00a0c_b;\n\n    int\u00a0i_a;\n\n    static\u00a0int\u00a0i_b;\n\n    float\u00a0f_a;\n\n    static\u00a0float\u00a0f_b;\n\n    double\u00a0d_a;\n\npublic:\n\n    void\u00a0fun_1() {}\n\n};\n\n//Derived1\u7c7b\nclass\u00a0Derived1\u00a0: public\u00a0Base\n{\n\n    char\u00a0c_b;\n\npublic:\n\n    void\u00a0fun_d1() {}\n\n};\n\n//Derived2\u7c7b\nclass\u00a0Derived2\u00a0: public\u00a0Derived1\n{\n\n    double\u00a0d_b;\n\npublic:\n\n    void\u00a0fun_d2() {}\n\n};\n</code></pre>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_5","title":"\u5e03\u5c40\uff1a","text":"<pre><code>1&gt;class Base size(24):\n\n1&gt; +---\n\n1&gt; 0 | c_a\n\n1&gt; \u00a0 | &lt;alignment member&gt; (size=3)\n\n1&gt; 4 | i_a\n\n1&gt; 8 | f_a\n\n1&gt; \u00a0 | &lt;alignment member&gt; (size=4)\n\n1&gt;16 | d_a\n\n1&gt; +---\n\n1&gt;class Derived1 size(32):\n\n1&gt; +---\n\n1&gt; 0 | +--- (base class Base)\n\n1&gt; 0 | | c_a\n\n1&gt; \u00a0 | | &lt;alignment member&gt; (size=3)\n\n1&gt; 4 | | i_a\n\n1&gt; 8 | | f_a\n\n1&gt; \u00a0 | | &lt;alignment member&gt; (size=4)\n\n1&gt;16 | | d_a\n\n1&gt; | +---\n\n1&gt;24 | c_b\n\n1&gt; \u00a0 | &lt;alignment member&gt; (size=7)\n\n1&gt; +---\n\n1&gt;class Derived2 size(40):\n\n1&gt; +---\n\n1&gt; 0 | +--- (base class Derived1)\n\n1&gt; 0 | | +--- (base class Base)\n\n1&gt; 0 | | | c_a\n\n1&gt; \u00a0 | | | &lt;alignment member&gt; (size=3)\n\n1&gt; 4 | | | i_a\n\n1&gt; 8 | | | f_a\n\n1&gt; \u00a0 | | | &lt;alignment member&gt; (size=4)\n\n1&gt;16 | | | d_a\n\n1&gt; | | +---\n\n1&gt;24 | | c_b\n\n1&gt; \u00a0 | | &lt;alignment member&gt; (size=7)\n\n1&gt; | +---\n\n1&gt;32 | d_b\n\n1&gt;\u00a0+---\n</code></pre> <ul> <li> <p>\u6bcf\u4e2a\u6d3e\u751f\u7c7b\u4e2d\u8d77\u59cb\u4f4d\u7f6e\u90fd\u662fBase class subobjectj\u57fa\u7c7b\u5b50\u5bf9\u8c61</p> </li> <li> <p>\u5185\u5b58\u7a7a\u95f4\u4f1a\u6309\u7167\u7c7b\u7684\u7ee7\u627f\u987a\u5e8f(\u7236\u7c7b\u5230\u5b50\u7c7b)\u548c\u5b57\u6bb5\u7684\u58f0\u660e\u987a\u5e8f\u5e03\u5c40</p> </li> </ul>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#22","title":"2.2 \u6709\u865a\u51fd\u6570","text":"<pre><code>class Base\n{\nprivate:\n    char c_a;\n    static char c_b;\n    int i_a;\n    static int i_b;\n    float f_a;\n    static float f_b;\n    double d_a;\npublic:\n    virtual void fun_1() {}\n    virtual void fun_2() {}\n};\n\n//Derived1\u7c7b\nclass Derived1 : public Base\n{\n    char c_b;\n\npublic:\n    virtual void fun_d1() {}\n    void fun_2() {}\n};\n\n//Derived2\u7c7b\nclass Derived2 : public Derived1\n{\n    double d_b;\n\npublic:\n    virtual void fun_d2() {}\n};\n</code></pre>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_6","title":"\u5e03\u5c40","text":"<pre><code>1&gt;class Base    size(32):\n1&gt;  +---\n1&gt; 0    | {vfptr}\n1&gt; 8    | c_a\n1&gt;      | &lt;alignment member&gt; (size=3)\n1&gt;12    | i_a\n1&gt;16    | f_a\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;24    | d_a\n1&gt;  +---\n1&gt;Base::$vftable@:\n1&gt;  | &amp;Base_meta\n1&gt;  |  0\n1&gt; 0    | &amp;Base::fun_1\n1&gt; 1    | &amp;Base::fun_2\n1&gt;Base::fun_1 this adjustor: 0\n1&gt;Base::fun_2 this adjustor: 0\n1&gt;class Derived1    size(40):\n1&gt;  +---\n1&gt; 0    | +--- (base class Base)\n1&gt; 0    | | {vfptr}\n1&gt; 8    | | c_a\n1&gt;      | | &lt;alignment member&gt; (size=3)\n1&gt;12    | | i_a\n1&gt;16    | | f_a\n1&gt;      | | &lt;alignment member&gt; (size=4)\n1&gt;24    | | d_a\n1&gt;  | +---\n1&gt;32    | c_b\n1&gt;      | &lt;alignment member&gt; (size=7)\n1&gt;  +---\n1&gt;Derived1::$vftable@:\n1&gt;  | &amp;Derived1_meta\n1&gt;  |  0\n1&gt; 0    | &amp;Base::fun_1\n1&gt; 1    | &amp;Derived1::fun_2\n1&gt; 2    | &amp;Derived1::fun_d1\n1&gt;Derived1::fun_d1 this adjustor: 0\n1&gt;Derived1::fun_2 this adjustor: 0\n1&gt;class Derived2    size(48):\n1&gt;  +---\n1&gt; 0    | +--- (base class Derived1)\n1&gt; 0    | | +--- (base class Base)\n1&gt; 0    | | | {vfptr}\n1&gt; 8    | | | c_a\n1&gt;      | | | &lt;alignment member&gt; (size=3)\n1&gt;12    | | | i_a\n1&gt;16    | | | f_a\n1&gt;      | | | &lt;alignment member&gt; (size=4)\n1&gt;24    | | | d_a\n1&gt;  | | +---\n1&gt;32    | | c_b\n1&gt;      | | &lt;alignment member&gt; (size=7)\n1&gt;  | +---\n1&gt;40    | d_b\n1&gt;  +---\n1&gt;Derived2::$vftable@:\n1&gt;  | &amp;Derived2_meta\n1&gt;  |  0\n1&gt; 0    | &amp;Base::fun_1\n1&gt; 1    | &amp;Derived1::fun_2\n1&gt; 2    | &amp;Derived1::fun_d1\n1&gt; 3    | &amp;Derived2::fun_d2\n</code></pre>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_7","title":"\u4e09\u3001\u591a\u91cd\u7ee7\u627f","text":"<pre><code>class A\n{\nprivate:\n    char c_a;\n    static char c_b;\n    int i_a;\n    static int i_b;\n    float f_a;\n    static float f_b;\n    double d_a;\npublic:\n    void fun_A() {}\n    virtual void vfun_A() {}\n    virtual ~A() {}\n};\n\nclass B\n{\n    char c_b;\n\npublic:\n    void fun_B() {}\n    virtual void vfun_B() {}\n    virtual ~B() {}\n};\n\nclass C : public A, public B\n{\n    double d_b;\n\npublic:\n    void fun_C() {}\n    virtual void vfun_C() {}\n    virtual ~C() {}\n};\n</code></pre>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_8","title":"\u5e03\u5c40","text":"<pre><code>1&gt;class A   size(32):\n1&gt;  +---\n1&gt; 0    | {vfptr}\n1&gt; 8    | c_a\n1&gt;      | &lt;alignment member&gt; (size=3)\n1&gt;12    | i_a\n1&gt;16    | f_a\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;24    | d_a\n1&gt;  +---\n1&gt;A::$vftable@:\n1&gt;  | &amp;A_meta\n1&gt;  |  0\n1&gt; 0    | &amp;A::vfun_A\n1&gt; 1    | &amp;A::{dtor}\n1&gt;A::vfun_A this adjustor: 0\n1&gt;A::{dtor} this adjustor: 0\n1&gt;A::__delDtor this adjustor: 0\n1&gt;A::__vecDelDtor this adjustor: 0\n1&gt;class B   size(16):\n1&gt;  +---\n1&gt; 0    | {vfptr}\n1&gt; 8    | c_b\n1&gt;      | &lt;alignment member&gt; (size=7)\n1&gt;  +---\n1&gt;B::$vftable@:\n1&gt;  | &amp;B_meta\n1&gt;  |  0\n1&gt; 0    | &amp;B::vfun_B\n1&gt; 1    | &amp;B::{dtor}\n1&gt;B::vfun_B this adjustor: 0\n1&gt;B::{dtor} this adjustor: 0\n1&gt;B::__delDtor this adjustor: 0\n1&gt;B::__vecDelDtor this adjustor: 0\n1&gt;class C   size(56):\n1&gt;  +---\n1&gt; 0    | +--- (base class A)\n1&gt; 0    | | {vfptr}\n1&gt; 8    | | c_a\n1&gt;      | | &lt;alignment member&gt; (size=3)\n1&gt;12    | | i_a\n1&gt;16    | | f_a\n1&gt;      | | &lt;alignment member&gt; (size=4)\n1&gt;24    | | d_a\n1&gt;  | +---\n1&gt;32    | +--- (base class B)\n1&gt;32    | | {vfptr}\n1&gt;40    | | c_b\n1&gt;      | | &lt;alignment member&gt; (size=7)\n1&gt;  | +---\n1&gt;48    | d_b\n1&gt;  +---\n1&gt;C::$vftable@A@:\n1&gt;  | &amp;C_meta\n1&gt;  |  0\n1&gt; 0    | &amp;A::vfun_A\n1&gt; 1    | &amp;C::{dtor}\n1&gt; 2    | &amp;C::vfun_C\n1&gt;C::$vftable@B@:\n1&gt;  | -32\n1&gt; 0    | &amp;B::vfun_B\n1&gt; 1    | &amp;thunk: this-=32; goto C::{dtor}\n1&gt;C::vfun_C this adjustor: 0\n1&gt;C::{dtor} this adjustor: 0\n1&gt;C::__delDtor this adjustor: 0\n1&gt;C::__vecDelDtor this adjustor: 0\n</code></pre> <ul> <li>\u6bcf\u4e2a\u5305\u542b\u865a\u51fd\u6570\u7684\u7236\u7c7b\u90fd\u4f1a\u6709\u81ea\u5df1\u7684\u865a\u51fd\u6570\u8868\uff0c\u5e76\u4e14\u6309\u7167\u7ee7\u627f\u987a\u5e8f\u5e03\u5c40(\u865a\u8868\u6307\u9488+\u5b57\u6bb5\uff09\uff1b</li> <li>\u5982\u679c\u5b50\u7c7b\u91cd\u5199\u7236\u7c7b\u865a\u51fd\u6570\uff0c\u90fd\u4f1a\u5728\u6bcf\u4e00\u4e2a\u76f8\u5e94\u7684\u865a\u51fd\u6570\u8868\u4e2d\u66f4\u65b0\u76f8\u5e94\u5730\u5740\uff1b</li> <li>\u5982\u679c\u5b50\u7c7b\u6709\u81ea\u5df1\u7684\u65b0\u5b9a\u4e49\u7684\u865a\u51fd\u6570\u6216\u8005\u975e\u865a\u6210\u5458\u51fd\u6570\uff0c\u4e5f\u4f1a\u52a0\u5230\u7b2c\u4e00\u4e2a\u865a\u51fd\u6570\u8868\u7684\u540e\u9762\u3002</li> </ul>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_9","title":"\u56db\u3001\u83f1\u5f62\u7ee7\u627f","text":"<p>\u83f1\u5f62\u7ee7\u627f\uff1a\u7c7bB\u548cC\u5747\u7ee7\u627f\u81ea\u7c7bA\uff0c\u7c7bD\u540c\u65f6\u7ee7\u627f\u7c7bB\u548cC</p> <pre><code>class A\n{\nprivate:\n    char c_a;\n    int i_a;\n    float f_a;\n    double d_a;\npublic:\n    virtual ~A() {}\n};\n\nclass B : public A\n{\n    int i_b;\n\npublic:\n    virtual ~B() {}\n};\n\nclass C : public A\n{\n    int i_c;\n\npublic:\n    virtual ~C() {}\n};\n\nclass D : public B, public C\n{\n    int i_d;\n\npublic:\n    virtual ~D() {}\n};\n</code></pre>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_10","title":"\u5e03\u5c40","text":"<pre><code>1&gt;class A   size(32):\n1&gt;  +---\n1&gt; 0    | {vfptr}\n1&gt; 8    | c_a\n1&gt;      | &lt;alignment member&gt; (size=3)\n1&gt;12    | i_a\n1&gt;16    | f_a\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;24    | d_a\n1&gt;  +---\n1&gt;A::$vftable@:\n1&gt;  | &amp;A_meta\n1&gt;  |  0\n1&gt; 0    | &amp;A::{dtor}\n1&gt;A::{dtor} this adjustor: 0\n1&gt;A::__delDtor this adjustor: 0\n1&gt;A::__vecDelDtor this adjustor: 0\n1&gt;class B   size(40):\n1&gt;  +---\n1&gt; 0    | +--- (base class A)\n1&gt; 0    | | {vfptr}\n1&gt; 8    | | c_a\n1&gt;      | | &lt;alignment member&gt; (size=3)\n1&gt;12    | | i_a\n1&gt;16    | | f_a\n1&gt;      | | &lt;alignment member&gt; (size=4)\n1&gt;24    | | d_a\n1&gt;  | +---\n1&gt;32    | i_b\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;  +---\n1&gt;B::$vftable@:\n1&gt;  | &amp;B_meta\n1&gt;  |  0\n1&gt; 0    | &amp;B::{dtor}\n1&gt;B::{dtor} this adjustor: 0\n1&gt;B::__delDtor this adjustor: 0\n1&gt;B::__vecDelDtor this adjustor: 0\n1&gt;class C   size(40):\n1&gt;  +---\n1&gt; 0    | +--- (base class A)\n1&gt; 0    | | {vfptr}\n1&gt; 8    | | c_a\n1&gt;      | | &lt;alignment member&gt; (size=3)\n1&gt;12    | | i_a\n1&gt;16    | | f_a\n1&gt;      | | &lt;alignment member&gt; (size=4)\n1&gt;24    | | d_a\n1&gt;  | +---\n1&gt;32    | i_c\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;  +---\n1&gt;C::$vftable@:\n1&gt;  | &amp;C_meta\n1&gt;  |  0\n1&gt; 0    | &amp;C::{dtor}\n1&gt;C::{dtor} this adjustor: 0\n1&gt;C::__delDtor this adjustor: 0\n1&gt;C::__vecDelDtor this adjustor: 0\n1&gt;class D   size(88):\n1&gt;  +---\n1&gt; 0    | +--- (base class B)\n1&gt; 0    | | +--- (base class A)\n1&gt; 0    | | | {vfptr}\n1&gt; 8    | | | c_a\n1&gt;      | | | &lt;alignment member&gt; (size=3)\n1&gt;12    | | | i_a\n1&gt;16    | | | f_a\n1&gt;      | | | &lt;alignment member&gt; (size=4)\n1&gt;24    | | | d_a\n1&gt;  | | +---\n1&gt;32    | | i_b\n1&gt;      | | &lt;alignment member&gt; (size=4)\n1&gt;  | +---\n1&gt;40    | +--- (base class C)\n1&gt;40    | | +--- (base class A)\n1&gt;40    | | | {vfptr}\n1&gt;48    | | | c_a\n1&gt;      | | | &lt;alignment member&gt; (size=3)\n1&gt;52    | | | i_a\n1&gt;56    | | | f_a\n1&gt;      | | | &lt;alignment member&gt; (size=4)\n1&gt;64    | | | d_a\n1&gt;  | | +---\n1&gt;72    | | i_c\n1&gt;      | | &lt;alignment member&gt; (size=4)\n1&gt;  | +---\n1&gt;80    | i_d\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;  +---\n1&gt;D::$vftable@B@:\n1&gt;  | &amp;D_meta\n1&gt;  |  0\n1&gt; 0    | &amp;D::{dtor}\n1&gt;D::$vftable@C@:\n1&gt;  | -40\n1&gt; 0    | &amp;thunk: this-=40; goto D::{dtor}\n1&gt;D::{dtor} this adjustor: 0\n1&gt;D::__delDtor this adjustor: 0\n1&gt;D::__vecDelDtor this adjustor: 0\n</code></pre> <p>\u5982\u4e0aclass D\uff0csubobject A\u6709\u4e24\u4efd\uff0c\u6240\u4ee5A\u7684data member\u4e5f\u5b58\u4e86\u4e24\u4efd\uff0c\u4f46\u5b9e\u9645\u4e0a\u5bf9\u4e8eD\u800c\u8a00\uff0c\u53ea\u9700\u8981\u6709\u4e00\u4efdsubobject A\u5373\u591f\u4e86\u3002\u83f1\u5f62\u7ee7\u627f\u4e0d\u4ec5\u6d6a\u8d39\u5b58\u50a8\u7a7a\u95f4\uff0c\u800c\u4e14\u9020\u6210\u4e86\u6570\u636e\u8bbf\u95ee\u7684\u4e8c\u4e49\u6027\u3002\u89e3\u51b3\u529e\u6cd5\uff1a\u865a\u7ee7\u627f</p>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_11","title":"\u4e94\u3001\u865a\u7ee7\u627f","text":"<pre><code>class A\n{\nprivate:\n    char c_a;\n    int i_a;\n    float f_a;\n    double d_a;\npublic:\n    virtual ~A() {}\n};\n\nclass B : virtual public A\n{\n    int i_b;\n\npublic:\n    virtual ~B() {}\n};\n\nclass C : virtual public A\n{\n    int i_c;\n\npublic:\n    virtual ~C() {}\n};\n\nclass D : public B, public C\n{\n    int i_d;\n\npublic:\n    virtual ~D() {}\n};\n</code></pre>"},{"location":"C%2B%2B%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80/#_12","title":"\u5e03\u5c40","text":"<pre><code>1&gt;class A   size(32):\n1&gt;  +---\n1&gt; 0    | {vfptr}\n1&gt; 8    | c_a\n1&gt;      | &lt;alignment member&gt; (size=3)\n1&gt;12    | i_a\n1&gt;16    | f_a\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;24    | d_a\n1&gt;  +---\n1&gt;A::$vftable@:\n1&gt;  | &amp;A_meta\n1&gt;  |  0\n1&gt; 0    | &amp;A::{dtor}\n1&gt;A::{dtor} this adjustor: 0\n1&gt;A::__delDtor this adjustor: 0\n1&gt;A::__vecDelDtor this adjustor: 0\n1&gt;class B   size(48):\n1&gt;  +---\n1&gt; 0    | {vbptr}\n1&gt; 8    | i_b\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;  +---\n1&gt;  +--- (virtual base A)\n1&gt;16    | {vfptr}\n1&gt;24    | c_a\n1&gt;      | &lt;alignment member&gt; (size=3)\n1&gt;28    | i_a\n1&gt;32    | f_a\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;40    | d_a\n1&gt;  +---\n1&gt;B::$vbtable@:\n1&gt; 0    | 0\n1&gt; 1    | 16 (Bd(B+0)A)\n1&gt;B::$vftable@:\n1&gt;  | -16\n1&gt; 0    | &amp;B::{dtor}\n1&gt;B::{dtor} this adjustor: 16\n1&gt;B::__delDtor this adjustor: 16\n1&gt;B::__vecDelDtor this adjustor: 16\n1&gt;vbi:     class  offset o.vbptr  o.vbte fVtorDisp\n1&gt;               A      16       0       4 0\n1&gt;class C   size(48):\n1&gt;  +---\n1&gt; 0    | {vbptr}\n1&gt; 8    | i_c\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;  +---\n1&gt;  +--- (virtual base A)\n1&gt;16    | {vfptr}\n1&gt;24    | c_a\n1&gt;      | &lt;alignment member&gt; (size=3)\n1&gt;28    | i_a\n1&gt;32    | f_a\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;40    | d_a\n1&gt;  +---\n1&gt;C::$vbtable@:\n1&gt; 0    | 0\n1&gt; 1    | 16 (Cd(C+0)A)\n1&gt;C::$vftable@:\n1&gt;  | -16\n1&gt; 0    | &amp;C::{dtor}\n1&gt;C::{dtor} this adjustor: 16\n1&gt;C::__delDtor this adjustor: 16\n1&gt;C::__vecDelDtor this adjustor: 16\n1&gt;vbi:     class  offset o.vbptr  o.vbte fVtorDisp\n1&gt;               A      16       0       4 0\n1&gt;class D   size(72):\n1&gt;  +---\n1&gt; 0    | +--- (base class B)\n1&gt; 0    | | {vbptr}\n1&gt; 8    | | i_b\n1&gt;      | | &lt;alignment member&gt; (size=4)\n1&gt;  | +---\n1&gt;16    | +--- (base class C)\n1&gt;16    | | {vbptr}\n1&gt;24    | | i_c\n1&gt;      | | &lt;alignment member&gt; (size=4)\n1&gt;  | +---\n1&gt;32    | i_d\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;  +---\n1&gt;  +--- (virtual base A)\n1&gt;40    | {vfptr}\n1&gt;48    | c_a\n1&gt;      | &lt;alignment member&gt; (size=3)\n1&gt;52    | i_a\n1&gt;56    | f_a\n1&gt;      | &lt;alignment member&gt; (size=4)\n1&gt;64    | d_a\n1&gt;  +---\n1&gt;D::$vbtable@B@:\n1&gt; 0    | 0\n1&gt; 1    | 40 (Dd(B+0)A)\n1&gt;D::$vbtable@C@:\n1&gt; 0    | 0\n1&gt; 1    | 24 (Dd(C+0)A)\n1&gt;D::$vftable@:\n1&gt;  | -40\n1&gt; 0    | &amp;D::{dtor}\n1&gt;D::{dtor} this adjustor: 40\n1&gt;D::__delDtor this adjustor: 40\n1&gt;D::__vecDelDtor this adjustor: 40\n1&gt;vbi:     class  offset o.vbptr  o.vbte fVtorDisp\n1&gt;               A      40       0       4 0\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0cclass B\u4e2d\u6709\u4e24\u4e2a\u865a\u6307\u9488\uff1a\u00a0\u7b2c\u4e00\u4e2a\u6307\u5411B\u81ea\u5df1\u7684\u865a\u8868\uff08\u6ce8\u610f\u8fd9\u91cc\u662fvbptr\u800c\u4e0d\u662fvfptr\uff0c\u662f\u865a\u57fa\u7c7b\u6307\u9488\uff09\uff0c\u7b2c\u4e8c\u4e2a\u6307\u5411\u865a\u57fa\u7c7bA\u7684\u865a\u8868\u00a0\u3002\u800c\u4e14\uff0c\u00a0\u4ece\u5e03\u5c40\u4e0a\u770b\uff0cclass B\u7684\u90e8\u5206\u8981\u653e\u5728\u524d\u9762\uff0c\u865a\u57fa\u7c7bA\u7684\u90e8\u5206\u653e\u5728\u540e\u9762\u3002\u5728class B\u4e2d\u865a\u57fa\u7c7bA\u7684\u6210\u5206\u76f8\u5bf9\u5185\u5b58\u8d77\u59cb\u5904\u7684\u504f\u79fboffset\u7b49\u4e8eclass B\u7684\u5927\u5c0f\uff0816\u5b57\u8282\uff09\u3002C\u7684\u5185\u5b58\u5e03\u5c40\u548cB\u7c7b\u4f3c\u3002</p> <p>Class\u5982\u679c\u5185\u542b\u4e00\u4e2a\u6216\u591a\u4e2avirtual base subobjects\uff0c\u5c06\u88ab\u5206\u5272\u6210\u4e24\u90e8\u5206\uff1a\u4e00\u4e2a\u4e0d\u53d8\u533a\u57df\u548c\u4e00\u4e2a\u5171\u4eab\u533a\u57df\u3002\u4e0d\u53d8\u533a\u57df\u4e2d\u7684\u6570\u636e\uff0c\u4e0d\u7ba1\u540e\u7ee7\u5982\u4f55\u884d\u5316\uff0c\u603b\u6709\u56fa\u5b9a\u7684offset\uff08\u4eceobject\u7684\u5f00\u5934\u7b97\u8d77\uff09\uff0c\u6240\u4ee5\u8fd9\u4e00\u90e8\u5206\u53ef\u4ee5\u76f4\u63a5\u5b58\u53d6\u3002\u800c\u5171\u4eab\u533a\u57df\u6240\u8868\u73b0\u7684\u5c31\u662fvirtual base class subobject\u3002\u8fd9\u90e8\u5206\u6570\u636e\u7684\u4f4d\u7f6e\u4f1a\u56e0\u4e3a\u6bcf\u6b21\u7684\u6d3e\u751f\u64cd\u4f5c\u800c\u53d1\u751f\u53d8\u5316\uff0c\u6240\u4ee5\u5b83\u4eec\u53ea\u53ef\u4ee5\u88ab\u95f4\u63a5\u5b58\u53d6\u3002</p> <p>\u83f1\u5f62/\u94bb\u77f3\u7ee7\u627f\uff0c\u5e76\u91c7\u7528\u4e86\u865a\u7ee7\u627f\uff0c\u5219\u5185\u5b58\u7a7a\u95f4\u6392\u5217\u987a\u5e8f\u4e3a\uff1a\u5404\u4e2a\u7236\u7c7b(\u5305\u542b\u865a\u57fa\u7c7b\u6307\u9488)\u3001\u5b50\u7c7b\u3001\u516c\u5171\u57fa\u7c7b(\u6700\u4e0a\u65b9\u7684\u7236\u7c7b\uff0c\u5305\u542b\u865a\u51fd\u6570\u6307\u9488)\uff0c\u5e76\u4e14\u5404\u4e2a\u7236\u7c7b\u4e0d\u518d\u62f7\u8d1d\u516c\u5171\u57fa\u7c7b\u4e2d\u7684\u6570\u636e\u6210\u5458\u3002</p> <p>\u865a\u7ee7\u627f\u7684\u5b9e\u73b0\u539f\u7406\u662f\uff0c\u7f16\u8bd1\u5668\u5728\u6d3e\u751f\u7c7b\u7684\u5bf9\u8c61\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u6307\u9488vbptr\u3002vbptr\u6307\u7684\u662f\u865a\u57fa\u7c7b\u8868\u6307\u9488\uff08virtual base table pointer\uff09\uff0c\u8be5\u6307\u9488\u6307\u5411\u4e86\u4e00\u4e2a\u865a\u57fa\u7c7b\u8868\uff08virtual table\uff09\uff0c\u865a\u57fa\u8868\u4e2d\u8bb0\u5f55\u4e86\u865a\u57fa\u7c7b\u4e0e\u672c\u7c7b\u7684\u504f\u79fb\u5730\u5740\uff1b\u901a\u8fc7\u504f\u79fb\u5730\u5740\uff0c\u8fd9\u6837\u5c31\u627e\u5230\u4e86\u865a\u57fa\u7c7b\u6210\u5458\uff0c\u800c\u865a\u7ee7\u627f\u4e5f\u4e0d\u7528\u50cf\u666e\u901a\u591a\u7ee7\u627f\u90a3\u6837\u7ef4\u6301\u7740\u516c\u5171\u57fa\u7c7b\uff08\u865a\u57fa\u7c7b\uff09\u7684\u4e24\u4efd\u540c\u6837\u7684\u62f7\u8d1d\uff0c\u8282\u7701\u4e86\u5b58\u50a8\u7a7a\u95f4\u3002</p> <p>\u4ed4\u7ec6\u89c2\u5bdf\u53ef\u4ee5\u53d1\u73b0\uff0c<code>D::$vbtable@B@</code>\u4e2d\u7684\u504f\u79fb\u91cf\u662f40\uff0c\u89c2\u5bdfD\u7684\u5185\u5b58\u5e03\u5c40\u53ef\u4ee5\u770b\u5230B\u7c7b\u8d77\u59cb\u504f\u79fb\u91cf\u662f0\uff0c\u800cA\u7c7b\u7684\u504f\u79fb\u91cf\u662f40\uff0cA\u76f8\u5bf9D\u7684\u504f\u79fb\u91cf\u662f40\uff1b</p> <p>\u540c\u7406\u89c2\u5bdf\u00a0<code>D::$vbtable@C@</code>\u4e2d\u7684\u504f\u79fb\u91cf\u662f24\uff0c\u53ef\u4ee5\u770b\u5230D\u5185\u5b58\u5e03\u5c40\u4e2dC\u7c7b\u504f\u79fb\u91cf\u662f16\uff0cA\u76f8\u5bf9C\u7684\u4fbf\u5b9c\u5c31\u662f26\u3002</p> <p>\u7efc\u4e0a\u9a8c\u8bc1\u4e86\u865a\u57fa\u8868\u4e2d\u8bb0\u5f55\u4e86\u865a\u57fa\u7c7b\u4e0e\u672c\u7c7b\u7684\u504f\u79fb\u5730\u5740</p>"},{"location":"Freertos%20API/","title":"Freertos API","text":"<ul> <li> <p>FreeRTOS  </p> <ul> <li> <p>\u4efb\u52a1\u72b6\u6001  </p> <ul> <li> <p>\u8fd0\u884c\u6001  </p> </li> <li> <p>\u5c31\u7eea\u6001  </p> </li> <li> <p>\u963b\u585e \u6001  </p> </li> <li> <p>\u6302\u8d77\u6001  </p> </li> </ul> </li> <li> <p>\u4efb\u52a1\u76f8\u5173API  </p> <ul> <li> <p>\u4efb\u52a1\u521b\u5efa\uff08\u52a8\u6001\u65b9\u6cd5xTaskCreate()\u3001\u9759\u6001\u65b9\u6cd5xTaskCreateStatic()\uff09  </p> </li> <li> <p>\u4efb\u52a1\u5220\u9664\uff08xTaskDelete()\uff09  </p> </li> <li> <p>\u67e5\u8be2\u4efb\u52a1\u4f18\u5148\u7ea7(uxTaskPriorityGet())  </p> </li> <li> <p>\u6539\u53d8\u4efb\u52a1\u4f18\u5148\u7ea7\uff08vTaskPrioritySet()\uff09  </p> </li> </ul> </li> <li> <p>\u5ef6\u65f6\u51fd\u6570API  </p> <ul> <li> <p>\u76f8\u5bf9\u5ef6\u65f6\uff08vTaskDelay()\uff09  </p> </li> <li> <p>\u7edd\u5bf9\u5ef6\u65f6\uff08vTaskDelayUntil()\uff09  </p> </li> </ul> </li> <li> <p>\u961f\u5217\u76f8\u5173API  </p> <ul> <li> <p>\u961f\u5217\u521b\u5efa\uff08xQueueCreate()\uff09  </p> </li> <li> <p>\u4efb\u52a1\u7ea7\u5165\u961f\u51fd\u6570  </p> <ul> <li> <p>\u540e\u5411\u5165\u961f\uff08xQueueSend()\u3001xQueueSendToBack()\uff09  </p> </li> <li> <p>\u524d\u5411\u5165\u961f\uff08xQueuendSendToFront()\uff09  </p> </li> <li> <p>\u5e26\u590d\u5199\u529f\u80fd\u5165\u961f\uff08xQueueOverwrite()\uff09  </p> </li> </ul> </li> <li> <p>\u4e2d\u65ad\u7ea7\u5165\u961f\u51fd\u6570  </p> <ul> <li> <p>xQueueSendFromISR()  </p> </li> <li> <p>xQueueSendToBackFromISR()  </p> </li> <li> <p>xQueueSendToFrontFromISR()  </p> </li> <li> <p>xQueueOverwriteFromISR()  </p> </li> </ul> </li> <li> <p>\u4efb\u52a1\u7ea7\u51fa\u961f\u51fd\u6570  </p> <ul> <li> <p>\u8bfb\u53d6\u961f\u5217\u4fe1\u606f\uff0c\u8bfb\u53d6\u540e\u5220\u9664\uff08xQueueReceive()\uff09  </p> </li> <li> <p>\u8bfb\u53d6\u961f\u5217\u4fe1\u606f\uff0c\u8bfb\u53d6\u540e\u4e0d\u5220\u9664\uff08xQueuePeek()\uff09  </p> </li> </ul> </li> <li> <p>\u4e2d\u65ad\u7ea7\u51fa\u961f\u51fd\u6570  </p> <ul> <li> <p>xQueueReceviceFromISR()  </p> </li> <li> <p>xQueuePeekFromISR()  </p> </li> </ul> </li> </ul> </li> <li> <p>\u4fe1\u53f7\u91cf\u76f8\u5173API  </p> <ul> <li> <p>\u521b\u5efa\u4e8c\u503c\u4fe1\u53f7\u91cf\uff08BinarySemaphore\uff09  </p> <ul> <li> <p>\u9759\u6001\u521b\u5efa\u4e8c\u503c\u4fe1\u53f7\u91cf\uff08xSemaphoreCreate()\uff09  </p> </li> <li> <p>\u52a8\u6001\u521b\u5efa\u4e8c\u503c\u4fe1\u53f7\u91cf\uff08xSemaphoreStatic()\uff09  </p> </li> </ul> </li> <li> <p>\u91ca\u653e\u4fe1\u53f7\u91cf  </p> <ul> <li> <p>\u4efb\u52a1\u7ea7\u91ca\u653e\uff08xSemaphoreGive()\uff09  </p> </li> <li> <p>\u4e2d\u65ad\u7ea7\u91ca\u653e\uff08xSemaphoreGiveFromISR()\uff09  </p> </li> </ul> </li> <li> <p>\u83b7\u53d6\u4fe1\u53f7\u91cf  </p> <ul> <li> <p>\u4efb\u52a1\u7ea7\u83b7\u53d6\uff08xSemaphoreTake()\uff09  </p> </li> <li> <p>\u4e2d\u65ad\u7ea7\u83b7\u53d6\uff08xSemaphoreTakeFromISR()\uff09  </p> </li> </ul> </li> <li> <p>\u521b\u5efa\u8ba1\u6570\u578b\u4fe1\u53f7\u91cf  </p> <ul> <li> <p>\u52a8\u6001\u521b\u5efa\uff08xSemaphoreCreateCounting()\uff09  </p> </li> <li> <p>\u9759\u6001\u521b\u5efa\uff08xSemaphoreCreateCountingStatic()\uff09  </p> </li> </ul> </li> <li> <p>\u521b\u5efa\u4e92\u65a5\u4fe1\u53f7\u91cf  </p> <ul> <li> <p>\u52a8\u6001\u521b\u5efa\uff08xSemaphoreCreateMutex()\uff09  </p> </li> <li> <p>\u9759\u6001\u521b\u5efa\uff08xSemaphoreCreateMutexStatic()\uff09  </p> </li> </ul> </li> <li> <p>\u521b\u5efa\u9012\u5f52\u4e92\u65a5\u4fe1\u53f7\u91cf  </p> <ul> <li> <p>\u52a8\u6001\u521b\u5efa\uff08xSemaphoreCreateRecuisiveMutex()\uff09  </p> </li> <li> <p>\u9759\u6001\u521b\u5efa(xSemaphoreCreateRecursiveMutexStatic())  </p> </li> </ul> </li> </ul> </li> <li> <p>\u8f6f\u4ef6\u5b9a\u65f6\u5668\u76f8\u5173API  </p> <ul> <li> <p>\u521b\u5efa\u5b9a\u65f6\u5668  </p> <ul> <li> <p>\u52a8\u6001\u521b\u5efa\uff08xTimerCreate()\uff09  </p> </li> <li> <p>\u9759\u6001\u521b\u5efa\uff08xTimerCreateStatic()\uff09  </p> </li> </ul> </li> <li> <p>\u590d\u4f4d\u5b9a\u65f6\u5668  </p> <ul> <li> <p>\u4efb\u52a1\u7ea7\u590d\u4f4d\uff08xTimerReset()\uff09  </p> </li> <li> <p>\u4e2d\u65ad\u7ea7\u590d\u4f4d\uff08xTimerResetFromISR()\uff09  </p> </li> </ul> </li> <li> <p>\u5f00\u542f\u5b9a\u65f6\u5668  </p> <ul> <li> <p>\u4efb\u52a1\u7ea7\u5f00\u542f\uff08xTimerStart()\uff09  </p> </li> <li> <p>\u4e2d\u65ad\u7ea7\u5f00\u542f(xTimerStartFromISR())  </p> </li> </ul> </li> <li> <p>\u505c\u6b62\u5b9a\u65f6\u5668  </p> <ul> <li> <p>\u4efb\u52a1\u7ea7\u505c\u6b62\uff08xTimerStop()\uff09  </p> </li> <li> <p>\u4e2d\u65ad\u7ea7\u505c\u6b62(xTimerStopFromISR())  </p> </li> </ul> </li> </ul> </li> <li> <p>\u4e8b\u4ef6\u6807\u5fd7\u7ec4\u76f8\u5173API  </p> <ul> <li> <p>\u521b\u5efa\u4e8b\u4ef6\u6807\u5fd7\u7ec4  </p> <ul> <li> <p>\u52a8\u6001\u521b\u5efa\uff08xEventGroupCreate()\uff09  </p> </li> <li> <p>\u9759\u6001\u521b\u5efa\uff08xEventGroupCreateStatic()\uff09  </p> </li> </ul> </li> <li> <p>\u8bbe\u7f6e\u4e8b\u4ef6\u4f4d  </p> <ul> <li> <p>\u4efb\u52a1\u7ea7\u6e05\u96f6\uff08xEventGroupClearBits()\uff09  </p> </li> <li> <p>\u4efb\u52a1\u7ea7\u7f6e\u4f4d\uff08xEventGroupSetBits()\uff09  </p> </li> <li> <p>\u4e2d\u65ad\u7ea7\u6e05\u96f6\uff08xEventGroupClearBitsFromISR()\uff09  </p> </li> <li> <p>\u4e2d\u65ad\u7ea7\u7f6e\u4f4d\uff08xEventGroupSetBitsFromISR()\uff09  </p> </li> </ul> </li> <li> <p>\u83b7\u53d6\u4e8b\u4ef6\u6807\u5fd7\u7ec4\u503c  </p> <ul> <li> <p>\u4efb\u52a1\u7ea7\u83b7\u53d6\uff08xEventGroupGetBits()\uff09  </p> </li> <li> <p>\u4e2d\u65ad\u7ea7\u83b7\u53d6\uff08xEventGroupGetBitsFromISR()\uff09  </p> </li> </ul> </li> <li> <p>\u7b49\u5f85\u6307\u5b9a\u4e8b\u4ef6\u6807\u5fd7\u7ec4  </p> <ul> <li>xEventGroupWaitBits()  </li> </ul> </li> </ul> </li> <li> <p>\u4efb\u52a1\u901a\u77e5     -</p> </li> </ul> </li> </ul>"},{"location":"GCC%E7%BC%96%E8%AF%91%E5%99%A8%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/","title":"GCC\u7f16\u8bd1\u5668\u4f7f\u7528\u8bb0\u5f55","text":"<ol> <li>\u9884\u5904\u7406         eg: <code>gcc -E main.c -o main .i</code></li> <li>\u7f16\u8bd1         eg: <code>gcc -S main.i -o main.s</code></li> <li>\u6c47\u7f16         eg: <code>gcc -c main.s -o main</code></li> </ol> <p>gcc [-c|-S|-E] [-std=standard] [-Idir] [-Ldir] [-o outfile] infile... [-lxxx]</p>"},{"location":"NFS%E7%9A%84%E6%90%AD%E5%BB%BA/","title":"NFS\u7684\u642d\u5efa","text":""},{"location":"NFS%E7%9A%84%E6%90%AD%E5%BB%BA/#1nfs","title":"1\u3001\u5b89\u88c5NFS\u670d\u52a1","text":"<p><code>sudo apt-get install nfs-kernel-server</code></p>"},{"location":"NFS%E7%9A%84%E6%90%AD%E5%BB%BA/#2","title":"2\u3001\u65b0\u5efa\u76ee\u5f55\u53ca\u4fee\u6539\u6743\u9650","text":"<p><code>sudo mkdir /home/xx/linux/nfs</code></p> <p><code>sudo chmod 777 /home/xx/linux/nfs/</code></p>"},{"location":"NFS%E7%9A%84%E6%90%AD%E5%BB%BA/#3nfs","title":"3\u3001\u914d\u7f6eNFS\u670d\u52a1","text":"<p>sudo vi /etc/exports</p> <p>\u5728\u6700\u540e\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9</p> <pre><code>/home/xx/linux/nfs   *(rw,sync,no_root_squash)\n</code></pre> <p>/home/xx/linux/nfs \u8868\u793a NFS \u5171\u4eab\u7684\u76ee\u5f55</p> <p>*\u8868\u793a\u5141\u8bb8\u6240\u6709\u7684\u7f51\u7edc\u6bb5\u8bbf\u95ee</p> <p>rw \u8868\u793a\u8bbf\u95ee\u8005\u5177\u6709\u53ef\u8bfb\u5199\u6743\u9650</p> <p>sync \u8868\u793a\u5c06\u7f13\u5b58\u5199\u5165\u8bbe\u5907\u4e2d\uff0c\u53ef\u4ee5\u8bf4\u662f\u540c\u6b65\u7f13\u5b58\u7684\u610f\u601d</p> <p>no_root_squash \u8868\u793a\u8bbf\u95ee\u8005\u5177\u6709 root \u6743\u9650\u3002</p>"},{"location":"NFS%E7%9A%84%E6%90%AD%E5%BB%BA/#4-nfs","title":"4\u3001\u91cd\u542f NFS \u670d\u52a1\u5668","text":"<p><code>sudo /etc/init.d/nfs-kernel-server restart</code></p>"},{"location":"NFS%E7%9A%84%E6%90%AD%E5%BB%BA/#5-nfs","title":"5\u3001\u67e5\u770b NFS \u5171\u4eab\u76ee\u5f55","text":"<p><code>showmount -e</code></p>"},{"location":"Samba%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/","title":"Samba\u4f7f\u7528\u8bb0\u5f55","text":"<p>\u53c2\u8003\u8d44\u6599\u94fe\u63a5</p> <ul> <li>==\u5b89\u88c5\u6559\u7a0b==</li> <li>==\u63a8\u8350\u535a\u5ba2==</li> <li>==\u66f4\u6362\u7528\u6237==</li> <li>==\u6743\u9650\u7ba1\u7406==</li> </ul> <p>\u6ce8\u610f\uff1a</p> <p>Since Samba doesn\u2019t use the system account password, we need to set up a Samba password for our user account:</p> <p>sudo smbpasswd -a username</p> <p>Note:</p> <p>Username used must belong to a system account, else it won\u2019t save.</p> <p>Samba\u8d26\u53f7\u4e00\u5b9a\u8981\u662f\u7cfb\u7edf\u62e5\u6709\u7684\u8d26\u53f7\u3002</p> <p>\u5171\u4eab\u914d\u7f6e\uff1a</p> <pre><code>[temp] \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5171\u4eab\u8d44\u6e90\u540d\u79f0\uff0c\u4e5f\u5c31\u662f\u6d4f\u89c8\u65f6\u663e\u793a\u7684\u540d\u5b57\n\ncomment = Temporary file space \u00a0#\u7b80\u5355\u7684\u89e3\u91ca\uff0c\u5185\u5bb9\u65e0\u5173\u7d27\u8981\n\npath = /tmp \u00a0\u00a0\u00a0#\u5b9e\u9645\u7684\u5171\u4eab\u76ee\u5f55\n\nwritable = yes \u00a0#\u8bbe\u7f6e\u4e3a\u53ef\u5199\u5165\n\nbrowseable = yes #\u53ef\u4ee5\u88ab\u6240\u6709\u7528\u6237\u6d4f\u89c8\u5230\u8d44\u6e90\u540d\u79f0\uff0c\n\nguest ok = yes \u00a0#\u53ef\u4ee5\u8ba9\u7528\u6237\u968f\u610f\u767b\u5f55\n\npublic = yes \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5141\u8bb8\u533f\u540d\u67e5\u770b\n\nvalid users = \u7528\u6237\u540d \u00a0\u00a0#\u8bbe\u7f6e\u8bbf\u95ee\u7528\u6237\n\nvalid users = @\u7ec4\u540d \u00a0\u00a0#\u8bbe\u7f6e\u8bbf\u95ee\u7ec4\n\nreadonly = yes \u00a0\u00a0\u00a0\u00a0\u00a0#\u53ea\u8bfb\n\nreadonly = no \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u8bfb\u5199\n\nhosts deny = 192.168.0.0 \u00a0\u00a0\u00a0#\u8868\u793a\u7981\u6b62\u6240\u6709\u6765\u81ea192.168.0.0/24 \u7f51\u6bb5\u7684IP \u5730\u5740\u8bbf\u95ee\n\nhosts allow = 192.168.0.24 #\u8868\u793a\u5141\u8bb8192.168.0.24 \u8fd9\u4e2aIP \u5730\u5740\u8bbf\u95ee\n</code></pre> <p>\u7528\u6237\u7ba1\u7406\uff1a</p> <pre><code>pdbedit -a username \u00a0\u00a0\u00a0#\u65b0\u5efaSamba\u8d26\u6237\u3002\n\npdbedit -x username \u00a0\u00a0\u00a0#\u5220\u9664Samba\u8d26\u6237\u3002\n\npdbedit -L \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5217\u51faSamba\u7528\u6237\u5217\u8868\uff0c\u8bfb\u53d6passdb.tdb\u6570\u636e\u5e93\u6587\u4ef6\u3002\n\npdbedit -Lv \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0#\u5217\u51faSamba\u7528\u6237\u5217\u8868\u8be6\u7ec6\u4fe1\u606f\u3002\n\npdbedit -c \u201c[D]\u201d -u username \u00a0\u00a0#\u6682\u505c\u8be5Samba\u7528\u6237\u8d26\u53f7\u3002\n\npdbedit -c \u201c[]\u201d -u username \u00a0\u00a0\u00a0\u00a0#\u6062\u590d\u8be5Samba\u7528\u6237\u8d26\u53f7\u3002\n\nsudo service smbd restart    #\u91cd\u542fsmb\n\nsudo ufw allow samba           \n\n\\\\ip-address\\sambashare\n</code></pre>"},{"location":"Vim%E4%BD%BF%E7%94%A8/","title":"Vim\u4f7f\u7528","text":"<ul> <li>vim\u6a21\u5f0f  <ul> <li> <p>\u5e38\u7528\u547d\u4ee4  </p> <ul> <li> <p>\u8bbe\u7f6e\u884c\u53f7  </p> <ul> <li>:set nu  </li> </ul> </li> <li> <p>\u53d6\u6d88\u884c\u53f7  </p> <ul> <li>:set nonu  </li> </ul> </li> <li> <p>\u8df3\u5230\u7b2c\u4e00\u884c  </p> <ul> <li>gg  </li> </ul> </li> <li> <p>\u8df3\u5230\u6700\u540e\u4e00\u884c  </p> <ul> <li>G  </li> </ul> </li> <li> <p>\u8df3\u5230\u6307\u5b9a#\u884c  </p> <ul> <li> </li> </ul> </li> <li> <p>\u8df3\u5230\u884c\u9996  </p> <ul> <li>0\u6216^  </li> </ul> </li> <li> <p>\u8df3\u5230\u884c\u5c3e  </p> <ul> <li>$  </li> </ul> </li> <li> <p>\u5220\u9664\u5355\u4e2a\u5b57\u7b26  </p> <ul> <li>x\u6216Del  </li> </ul> </li> <li> <p>\u5220\u9664\u4e00\u884c  </p> <ul> <li>dd  </li> </ul> </li> <li> <p>\u5220\u9664\u4ece\u5149\u6807\u5f00\u59cb\u7684#\u884c  </p> <ul> <li> </li> </ul> </li> <li> <p>\u5220\u9664\u4ece\u5149\u6807\u5230\u884c\u9996\u7684\u5185\u5bb9  </p> <ul> <li>d^  </li> </ul> </li> <li> <p>\u5220\u9664\u4ece\u5149\u6807\u5230\u884c\u5c3e\u7684\u5185\u5bb9  </p> <ul> <li>d$  </li> </ul> </li> <li> <p>\u590d\u5236\u4e00\u884c\u5185\u5bb9  </p> <ul> <li>yy  </li> </ul> </li> <li> <p>\u590d\u5236\u4ece\u5149\u6807\u5f00\u59cb\u7684#\u884c\u5185\u5bb9  </p> <ul> <li> </li> </ul> </li> <li> <p>\u7c98\u8d34  </p> <ul> <li> <p>P\u7c98\u8d34\u5230\u5149\u6807\u524d\u4e00\u884c  </p> </li> <li> <p>p\u4ece\u5149\u6807\u540e\u5f00\u59cb\u7c98\u8d34  </p> </li> </ul> </li> <li> <p>\u67e5\u627e\u5185\u5bb9  </p> <ul> <li> <p>/word\u4ece\u4e0a\u800c\u4e0b\u67e5\u627e\u6587\u5b57word  </p> </li> <li> <p>?word\u4ece\u4e0b\u800c\u4e0a\u67e5\u627e\u6587\u5b57word  </p> </li> <li> <p>n\u5b9a\u4f4d\u4e0b\u4e00\u4e2a\u67e5\u627e\u5185\u5bb9  </p> </li> <li> <p>N\u5b9a\u4f4d\u4e0a\u4e00\u4e2a\u67e5\u627e\u5185\u5bb9  </p> </li> </ul> </li> <li> <p>\u64a4\u9500\u64cd\u4f5c  </p> <ul> <li> <p>u\u53d6\u6d88\u6700\u8fd1\u4e00\u6b21\u64cd\u4f5c\uff0c\u591a\u6b21\u6309\u53ef\u6062\u590d\u5df2\u8fdb\u884c\u7684\u591a\u6b21\u64cd\u4f5c  </p> </li> <li> <p>U\u53d6\u6d88\u5bf9\u5f53\u524d\u884c\u7684\u6240\u6709\u64cd\u4f5c  </p> </li> </ul> </li> <li> <p>\u67e5\u627e\u66ff\u6362  </p> <ul> <li> <p>:s /old/new \u5c06\u5f53\u524d\u884c\u67e5\u8be2\u5230\u7684\u7b2c\u4e00\u4e2aold\u66ff\u6362\u4e3anew  </p> </li> <li> <p>:s /old/new/g \u5c06\u5f53\u524d\u884c\u67e5\u627e\u5230\u7684\u6240\u6709old\u90fd\u66ff\u6362\u4e3anew  </p> </li> <li> <p>:#,# s /old/new/g \u5c06#,#\u8303\u56f4\u5185\u7684old\u66ff\u6362\u4e3anew  </p> </li> <li> <p>:% s /old/new/g \u5c06\u6587\u672c\u5185\u6240\u6709\u7684old\u66ff\u6362\u4e3anew  </p> </li> <li> <p>:% s /old/new/c \u5c06\u6587\u672c\u5185\u6240\u6709\u7684old\u66ff\u6362\u4e3anew,\u6bcf\u4e2a\u66ff\u6362\u4e1c\u897f\u8981\u6c42\u7528\u6237\u786e\u8ba4  </p> </li> </ul> </li> <li> <p>\u9000\u51fa\u4e0e\u4fdd\u5b58  </p> <ul> <li> <p>:w\u4fdd\u5b58  </p> </li> <li> <p>:q\u672a\u4fee\u6539\u9000\u51fa  </p> </li> <li> <p>:q!\u9000\u51fa\u4e0d\u4fdd\u5b58\u64cd\u4f5c  </p> </li> <li> <p>:wq\u6216ZZ\u9000\u51fa\u4fdd\u5b58</p> </li> </ul> </li> </ul> </li> </ul> </li> </ul>"},{"location":"Vim%E4%BD%BF%E7%94%A8/#gggg","title":"gg\u6216#G#G","text":""},{"location":"Vim%E4%BD%BF%E7%94%A8/#dd","title":"dd","text":""},{"location":"Vim%E4%BD%BF%E7%94%A8/#yy","title":"yy","text":""},{"location":"framebuffer%E6%A1%86%E6%9E%B6%E4%B8%8BSPI%E5%B1%8F%E7%9A%84%E9%A9%B1%E5%8A%A8%E7%A4%BA%E4%BE%8B/","title":"framebuffer\u6846\u67b6\u4e0bSPI\u5c4f\u7684\u9a71\u52a8\u793a\u4f8b","text":"<pre><code>#include &lt;linux/types.h&gt;\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/delay.h&gt;\n#include &lt;linux/ide.h&gt;\n#include &lt;linux/init.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/errno.h&gt;\n#include &lt;linux/gpio.h&gt;\n#include &lt;linux/cdev.h&gt;\n#include &lt;linux/device.h&gt;\n#include &lt;linux/of_gpio.h&gt;\n#include &lt;linux/semaphore.h&gt;\n#include &lt;linux/timer.h&gt;\n#include &lt;linux/spi/spi.h&gt;\n#include &lt;linux/of.h&gt;\n#include &lt;linux/of_address.h&gt;\n#include &lt;linux/of_gpio.h&gt;\n#include &lt;linux/platform_device.h&gt;\n#include &lt;asm/mach/map.h&gt;\n#include &lt;asm/uaccess.h&gt;\n#include &lt;asm/io.h&gt;\n#include &lt;linux/fb.h&gt;\n#include &lt;linux/dma-mapping.h&gt;\n#include &lt;linux/sched.h&gt;\n#include &lt;linux/wait.h&gt;\n#include &lt;linux/fs.h&gt; \n#include &lt;linux/module.h&gt; \n#include &lt;linux/uaccess.h&gt; \n#include &lt;asm/mach/map.h&gt;\n\n#define DEVICE_NAME     \"spi_st7796u\"   /* \u540d\u5b57 */\n\n/*\n * \u81ea\u5b9a\u4e49\u7ed3\u6784\u4f53spi_st7796u_lcd_dev\n */\nstruct spi_st7796u_lcd_dev {\n    dev_t  devid;                   /* \u8bbe\u5907\u53f7 */\n    struct cdev cdev;               /* cdev\u7ed3\u6784\u4f53 */\n    struct class *class;            /* \u7c7b */\n    struct device *device;          /* \u8bbe\u5907 */\n    void   *private_data;     \n\n    int    dc_gpio;\n    int    rest_gpio;\n};\n\nstatic struct spi_st7796u_lcd_dev spi_st7796u_lcd;  \n\ntypedef struct{\n    struct spi_device *spi;     //\u8bb0\u5f55fb_info\u5bf9\u8c61\u5bf9\u5e94\u7684spi\u8bbe\u5907\u5bf9\u8c61\n    struct task_struct *thread; //\u8bb0\u5f55\u7ebf\u7a0b\u5bf9\u8c61\u7684\u5730\u5740\uff0c\u6b64\u7ebf\u7a0b\u4e13\u7528\u4e8e\u628a\u663e\u5b58\u6570\u636e\u53d1\u9001\u5230\u5c4f\u7684\u9a71\u52a8ic\n}lcd_data_t;\n\n#define SPI_SPEED 25000000\n\n#define RED     0xf800\n#define GREEN   0x07e0\n#define BLUE    0x001f\n#define WHITE   0xffff\n#define BLACK   0x0000\n#define YELLOW  0xFFE0\n#define GRAY0   0xEF7D          //\u7070\u82720 3165 00110 001011 00101\n#define GRAY1   0x8410          //\u7070\u82721      00000 000000 00000\n#define GRAY2   0x4208          //\u7070\u82722  1111111111011111\n\n#define LCD_W 480\n#define LCD_H 320\n\n#define USE_HORIZONTAL       0  //\u987a\u65f6\u9488\u65cb\u8f6c\u5c4f\u5e55\u89d2\u5ea60-3\n\nstatic int tft_lcdfb_setcolreg(unsigned int regno, unsigned int red,\n                                unsigned int green, unsigned int blue,\n                                unsigned int transp, struct fb_info *info);\n\nstruct fb_ops fops = {\n    .owner = THIS_MODULE,\n    .fb_setcolreg = tft_lcdfb_setcolreg,\n    .fb_fillrect = cfb_fillrect,\n    .fb_copyarea = cfb_copyarea,\n    .fb_imageblit = cfb_imageblit,\n};\n\nvoid show_fb(struct fb_info *fbi, struct spi_device *spi);\n\n\n/* \u7ebf\u7a0b\u51fd\u6570 */\nint thread_func(void *data)\n{\n    struct fb_info *fbi = (struct fb_info *)data;\n    lcd_data_t *ldata = fbi-&gt;par;   \n\n    while(1)\n    {\n        if(kthread_should_stop())\n            break;\n        show_fb(fbi, ldata-&gt;spi);\n    }\n\n    return 0;\n}\n\nstatic u32 pseudo_palette[16];\nstatic inline unsigned int chan_to_field(unsigned int chan, struct fb_bitfield *bf)\n{\n    chan &amp;= 0xffff;\n    chan &gt;&gt;= 16 - bf-&gt;length;\n    return chan &lt;&lt; bf-&gt;offset;\n}\n\nstatic int tft_lcdfb_setcolreg(unsigned int regno, unsigned int red,\n                 unsigned int green, unsigned int blue,\n                 unsigned int transp, struct fb_info *info)\n{\n    unsigned int val;\n\n    if (regno &gt; 16)\n    {\n        printk(KERN_ALERT \"%s the regno is %d !!\\n\",__FUNCTION__, regno);\n        return 1;\n    }\n\n\n    /* \u7528red,green,blue\u4e09\u539f\u8272\u6784\u9020\u51faval  */\n    val  = chan_to_field(red,   &amp;info-&gt;var.red);\n    val |= chan_to_field(green, &amp;info-&gt;var.green);\n    val |= chan_to_field(blue,  &amp;info-&gt;var.blue);\n\n    pseudo_palette[regno] = val;\n    return 0;\n}\n\n/* \u6b64\u51fd\u6570\u5728spi\u8bbe\u5907\u9a71\u52a8\u7684probe\u51fd\u6570\u91cc\u88ab\u8c03\u7528 */\nstruct fb_info * fb_init(struct spi_device *spi)\n{\n    struct fb_info *fbi;\n    u8 *v_addr;\n    dma_addr_t p_addr;\n    lcd_data_t *ldata;\n\n    spi_st7796u_lcd.device-&gt;coherent_dma_mask = ~0;\n    v_addr = dma_alloc_coherent(spi_st7796u_lcd.device, LCD_W * LCD_H * 4, &amp;p_addr, GFP_KERNEL);\n    if(v_addr)\n    {\n        printk(KERN_ALERT \"allocate CM at virtual address: 0x%p\"\n            \"address: 0x%p size:%dKiB\\r\\n\", v_addr,\n            (void *)p_addr, LCD_W * LCD_H * 4 / SZ_1K);\n    }\n    else\n    {\n        printk(KERN_ALERT \"no mem in CMA area\\r\\n\");\n    }\n    fbi = framebuffer_alloc(sizeof(lcd_data_t), NULL);//\u989d\u5916\u5206\u914dlcd_data_t\u7c7b\u578b\u7a7a\u95f4\n    ldata = fbi-&gt;par;       //datal\u6307\u9488\u6307\u5411\u989d\u5916\u5206\u914d\u7684\u7a7a\u95f4\n    ldata-&gt;spi = spi;\n\n    fbi-&gt;pseudo_palette = pseudo_palette;\n    fbi-&gt;var.activate = FB_ACTIVATE_NOW;\n\n    /* \u8bbe\u7f6efbi\u7684\u53d8\u91cf RGB\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u957f\u5ea6\u548c\u504f\u79fb*/\n    fbi-&gt;var.xres = LCD_W;\n    fbi-&gt;var.yres = LCD_H;\n    fbi-&gt;var.xres_virtual = LCD_W;\n    fbi-&gt;var.yres_virtual = LCD_H;\n    fbi-&gt;var.bits_per_pixel = 32; // \u5c4f\u662frgb565, \u4f46QT\u7a0b\u5e8f\u53ea\u80fd\u652f\u630132\u4f4d.\u8fd8\u9700\u8981\u5728\u5237\u56fe\u65f6\u628a32\u4f4d\u7684\u50cf\u7d20\u6570\u636e\u8f6c\u6362\u6210rgb565\n    fbi-&gt;var.red.offset = 16;\n    fbi-&gt;var.red.length = 8;\n    fbi-&gt;var.green.offset = 8;\n    fbi-&gt;var.green.length = 8;\n    fbi-&gt;var.blue.offset = 0;\n    fbi-&gt;var.blue.length = 8;\n\n    /* \u8bbe\u7f6efbi\u7684\u5e38\u91cf */\n    strcpy(fbi-&gt;fix.id, \"spi_st7796u\");\n    fbi-&gt;fix.smem_start = p_addr; //\u663e\u5b58\u7684\u7269\u7406\u5730\u5740\n    fbi-&gt;fix.smem_len = LCD_W * LCD_H * 4;\n    fbi-&gt;fix.type = FB_TYPE_PACKED_PIXELS;\n    fbi-&gt;fix.visual = FB_VISUAL_TRUECOLOR;\n    fbi-&gt;fix.line_length = LCD_W * 4;\n\n    /* \u5176\u4ed6\u91cd\u8981\u7684\u6210\u5458 */\n    fbi-&gt;fbops = &amp;fops;\n    fbi-&gt;screen_base = v_addr;//\u663e\u5b58\u865a\u62df\u5730\u5740\n    fbi-&gt;screen_size = LCD_W * LCD_H * 4;//\u663e\u5b58\u5927\u5c0f\n\n    spi_set_drvdata(spi, fbi);  //spi\u6210\u5458\u5173\u8054\u4e86fbi\n\n    register_framebuffer(fbi);  //\u6ce8\u518c\u521d\u59cb\u5316\u5b8c\u6210\u7684fbi\n    ldata-&gt;thread = kthread_run(thread_func, fbi, spi-&gt;modalias);\n\n    return fbi;\n}\n\n/* \u6b64\u51fd\u6570\u5728spi\u8bbe\u5907\u9a71\u52a8remove\u65f6\u88ab\u8c03\u7528 */\nvoid fb_del(struct spi_device *spi)\n{\n    struct fb_info *fbi = spi_get_drvdata(spi); //\u5f97\u5230\u4e4b\u524d\u5b58\u5728spi\u8bbe\u5907\u4e2d\u7684fbi\n    lcd_data_t *ldata = fbi-&gt;par;\n\n    kthread_stop(ldata-&gt;thread); //\u8ba9\u5237\u56fe\u7ebf\u7a0b\u9000\u51fa\n    unregister_framebuffer(fbi);\n    dma_free_coherent(NULL, fbi-&gt;screen_size, fbi-&gt;screen_base, fbi-&gt;fix.smem_start);//\u628a\u7269\u7406\u5730\u5740\u548c\u865a\u62df\u5730\u5740\u653e\u8fdb\u53bb\n    framebuffer_release(fbi);\n}\n\nstatic int LCD_WriteReg(struct spi_device *spi, unsigned char c)\n{\n    struct spi_message msg = {0};\n    struct spi_transfer xfer = {0};\n    unsigned char tx;\n    int ret;\n\n    gpio_set_value(spi_st7796u_lcd.dc_gpio, 0);/* \u62c9\u4f4e\u53d1\u547d\u4ee4 */\n\n    xfer.speed_hz = SPI_SPEED,\n    xfer.tx_buf = &amp;tx;      /* \u53d1\u9001\u6570\u636e\u7f13\u5b58\u533a */\n    xfer.bits_per_word = 8; /* \u4e00\u6b21\u4f20\u8f938\u4e2abit */\n    xfer.len = 1;           /* \u4f20\u8f93\u957f\u5ea6\u4e3a2\u4e2a\u5b57\u8282\uff1a\u5bc4\u5b58\u5668\u5730\u5740+\u5199\u5165\u503c */\n\n    tx = c;         /* \u8981\u5199\u5165\u7684\u4ece\u673a\u8bbe\u5907\u5bc4\u5b58\u5668\u5730\u5740\uff08\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u5bc4\u5b58\u5668\u5730\u5740\u662f\u4e00\u4e2a\u5b57\u8282\uff09 */\n    spi_message_init(&amp;msg); /* \u521d\u59cb\u5316spi_message */\n    spi_message_add_tail(&amp;xfer, &amp;msg);  /* \u5c06spi_transfer\u6dfb\u52a0\u5230spi_message */\n    ret = spi_sync(spi, &amp;msg);      /* \u6267\u884c\u540c\u6b65\u6570\u636e\u4f20\u8f93 */\n    if (ret)\n        return ret;\n\n    return 0;\n}\n\nstatic int LCD_WriteReg_len(struct spi_device *spi, u8 *buf, unsigned int len)\n{\n    int ret;\n\n    struct spi_transfer *t;\n    struct spi_message m;\n\n    t = kzalloc(sizeof(struct spi_transfer), GFP_KERNEL);   /* \u7533\u8bf7\u5185\u5b58 */\n\n    gpio_set_value(spi_st7796u_lcd.dc_gpio, 0);/* \u62c9\u4f4e\u53d1\u547d\u4ee4 */\n\n    t-&gt;speed_hz = SPI_SPEED,\n    t-&gt;tx_buf = buf;            /* \u8981\u53d1\u9001\u7684\u6570\u636e */\n    t-&gt;len = len;               /* \u5b57\u8282 */\n    spi_message_init(&amp;m);       /* \u521d\u59cb\u5316spi_message */\n    spi_message_add_tail(t, &amp;m);/* \u5c06spi_transfer\u6dfb\u52a0\u5230spi_message\u961f\u5217 */\n    ret = spi_sync(spi, &amp;m);    /* \u540c\u6b65\u53d1\u9001 */\n\n    kfree(t);                   /* \u91ca\u653e\u5185\u5b58 */\n\n    return ret;\n}\n\n\nstatic int LCD_WriteData(struct spi_device *spi, unsigned char c)\n{\n    struct spi_message msg = {0};\n    struct spi_transfer xfer = {0};\n    unsigned char tx;\n    int ret;\n\n    gpio_set_value(spi_st7796u_lcd.dc_gpio, 1);    /* \u62c9\u9ad8\u53d1\u6570\u636e */\n\n    xfer.speed_hz = SPI_SPEED,\n    xfer.tx_buf = &amp;tx;      /* \u53d1\u9001\u6570\u636e\u7f13\u5b58\u533a */\n    xfer.bits_per_word = 8; /* \u4e00\u6b21\u4f20\u8f938\u4e2abit */\n    xfer.len = 1;           /* \u4f20\u8f93\u957f\u5ea6\u4e3a2\u4e2a\u5b57\u8282\uff1a\u5bc4\u5b58\u5668\u5730\u5740+\u5199\u5165\u503c */\n\n    tx = c;         /* \u8981\u5199\u5165\u7684\u4ece\u673a\u8bbe\u5907\u5bc4\u5b58\u5668\u5730\u5740\uff08\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u5bc4\u5b58\u5668\u5730\u5740\u662f\u4e00\u4e2a\u5b57\u8282\uff09 */\n    spi_message_init(&amp;msg); /* \u521d\u59cb\u5316spi_message */\n    spi_message_add_tail(&amp;xfer, &amp;msg);  /* \u5c06spi_transfer\u6dfb\u52a0\u5230spi_message */\n    ret = spi_sync(spi, &amp;msg);      /* \u6267\u884c\u540c\u6b65\u6570\u636e\u4f20\u8f93 */\n    if (ret)\n        return ret;\n\n    return 0;\n}\n\nstatic int LCD_WriteData_16bit(struct spi_device *spi, unsigned short dat)\n{\n    int ret;\n    struct spi_message msg = {0};\n    struct spi_transfer xfer = {0};\n    unsigned char tx = dat&gt;&gt;8;;\n    gpio_set_value(spi_st7796u_lcd.dc_gpio, 1);    /* \u62c9\u9ad8\u53d1\u6570\u636e */\n\n    xfer.speed_hz = SPI_SPEED,\n    xfer.tx_buf = &amp;tx;      /* \u53d1\u9001\u6570\u636e\u7f13\u5b58\u533a */\n    xfer.bits_per_word = 8; /* \u4e00\u6b21\u4f20\u8f938\u4e2abit */\n    xfer.len = 1;           /* \u4f20\u8f93\u957f\u5ea6\u4e3a2\u4e2a\u5b57\u8282\uff1a\u5bc4\u5b58\u5668\u5730\u5740+\u5199\u5165\u503c */\n\n    spi_message_init(&amp;msg);   /* \u521d\u59cb\u5316spi_message */\n    spi_message_add_tail(&amp;xfer, &amp;msg);    /* \u5c06spi_transfer\u6dfb\u52a0\u5230spi_message\u961f\u5217 */\n\n    ret = spi_sync(spi, &amp;msg);        /* \u4f7f\u7528\u540c\u6b65\u53d1\u9001 */\n\n    tx = dat&amp;0xFF;\n    xfer.tx_buf = &amp;tx;\n    ret = spi_sync(spi, &amp;msg);        /* \u4f7f\u7528\u540c\u6b65\u53d1\u9001 */\n    if (ret)\n        return ret;\n\n    return 0;\n}\n\nstatic int LCD_WriteData_len(struct spi_device *spi, u8 *buf, unsigned int len)\n{\n    int ret;\n\n    struct spi_transfer *t;\n    struct spi_message m;\n\n    t = kzalloc(sizeof(struct spi_transfer), GFP_KERNEL);   /* \u7533\u8bf7\u5185\u5b58 */\n\n    gpio_set_value(spi_st7796u_lcd.dc_gpio, 1);    /* \u62c9\u9ad8\u53d1\u6570\u636e */\n\n    t-&gt;speed_hz = SPI_SPEED,\n    t-&gt;tx_buf = buf;            /* \u8981\u53d1\u9001\u7684\u6570\u636e */\n    t-&gt;len = len;               /* \u5b57\u8282 */\n    spi_message_init(&amp;m);       /* \u521d\u59cb\u5316spi_message */\n    spi_message_add_tail(t, &amp;m);/* \u5c06spi_transfer\u6dfb\u52a0\u5230spi_message\u961f\u5217 */\n    ret = spi_sync(spi, &amp;m);    /* \u540c\u6b65\u53d1\u9001 */\n\n    kfree(t);                   /* \u91ca\u653e\u5185\u5b58 */\n\n    return ret;\n}\n\n\nstatic void LCD_Set_Window(struct spi_device *spi,u16 xstart,u16 ystart,u16 xend,u16 yend)\n{\n    LCD_WriteReg(spi, 0x2A);\n    LCD_WriteData_16bit(spi, xstart);\n    LCD_WriteData_16bit(spi, xend);\n\n    LCD_WriteReg(spi, 0x2B); \n    LCD_WriteData_16bit(spi, ystart);\n    LCD_WriteData_16bit(spi, yend);  \n\n    LCD_WriteReg(spi, 0x2C); //\u5f00\u59cb\u5199\u5165GRAM\n}\n\n/* framebuffer\u7ebf\u7a0b\u5237\u5c4f\u51fd\u6570 fbi\u663e\u5b58\u7684\u6570\u636e\u7ed9spi\u53d1\u9001*/\nvoid show_fb(struct fb_info *fbi, struct spi_device *spi)\n{\n    int x, y, i = 0;\n    u32 k;\n    u32 *p = (u32 *)(fbi-&gt;screen_base);\n    u16 c;\n    u8 *pp;\n\n    /* \u7533\u8bf7\u5185\u5b58 */\n    u8 *lcd_buffer = kzalloc(LCD_W * LCD_H * sizeof(u16), GFP_KERNEL);\n\n    LCD_Set_Window(spi, 0,0,LCD_W-1,LCD_H-1);\n    for (y = 0; y &lt; fbi-&gt;var.yres; y++)\n    {\n        for (x = 0; x &lt; fbi-&gt;var.xres; x++)\n        {\n            k = p[y*fbi-&gt;var.xres+x];//\u53d6\u51fa\u4e00\u4e2a\u50cf\u7d20\u70b9\u768432\u4f4d\u6570\u636e\n            // rgb8888 --&gt; rgb565       \n            pp = (u8 *)&amp;k;\n            c = pp[0] &gt;&gt; 3; //\u84dd\u8272\n            c |= (pp[1]&gt;&gt;2)&lt;&lt;5; //\u7eff\u8272\n            c |= (pp[2]&gt;&gt;3)&lt;&lt;11; //\u7ea2\u8272\n            lcd_buffer[i++] = (c&gt;&gt;8)&amp;0xff;\n            lcd_buffer[i++] = c&amp;0xff;\n        }\n    }\n    LCD_WriteData_len(spi, lcd_buffer, LCD_W * LCD_H * sizeof(u16));\n\n    /* \u91ca\u653e\u5185\u5b58 */\n    kfree(lcd_buffer);\n}\n\nvoid LCD_Disp_Pic(struct spi_device *spi)\n{\n    /* \u7533\u8bf7\u5185\u5b58 */\n    u8 *lcd_buffer = kzalloc(LCD_W * LCD_H * sizeof(u16), GFP_KERNEL);\n\n    /* \u8bbe\u7f6e\u5c4f\u5e55\u548c\u663e\u793a\u90e8\u5206 */\n    LCD_Set_Window(spi, 0, 0, LCD_W-1, LCD_H-1);\n    /* \u5bf9\u5185\u5b58\u8d4b\u503c */\n    memset(lcd_buffer, BLUE, LCD_W * LCD_H * sizeof(u16));\n    /* \u8fde\u7eed\u5199 */\n    LCD_WriteData_len(spi, lcd_buffer, LCD_W * LCD_H * sizeof(u16));\n\n    mdelay(500);\n\n    /* \u91ca\u653e\u5185\u5b58 */\n    kfree(lcd_buffer);\n\n    printk(KERN_ALERT \"LCD display picture ok!\\r\\n\");\n}\n\nstatic void lcd_reg_init(struct spi_device *spi)\n{\n    printk(KERN_ALERT \"This is lcd reg init func!\\r\\n\");\n\n    gpio_set_value(spi_st7796u_lcd.rest_gpio, 0);\n    mdelay(100);\n    gpio_set_value(spi_st7796u_lcd.rest_gpio, 1);\n    mdelay(50);\n    /******************************/\n    LCD_WriteReg(spi,0x11);     \n\n    mdelay(120);                //Delay 120ms\n\n    LCD_WriteReg(spi,0x36);     // Memory Data Access Control MY,MX~~\n    LCD_WriteData(spi,0x48);   \n\n    LCD_WriteReg(spi,0x3A);     \n    LCD_WriteData(spi,0x55);   //LCD_WriteData(0x66);\n\n    LCD_WriteReg(spi,0xF0);     // Command Set Control\n    LCD_WriteData(spi,0xC3);   \n\n    LCD_WriteReg(spi,0xF0);     \n    LCD_WriteData(spi,0x96);   \n\n    LCD_WriteReg(spi,0xB4);     \n    LCD_WriteData(spi,0x01);   \n\n    LCD_WriteReg(spi,0xB7);     \n    LCD_WriteData(spi,0xC6);   \n\n\n    LCD_WriteReg(spi,0xC0);     \n    LCD_WriteData(spi,0x80);   \n    LCD_WriteData(spi,0x45);   \n\n    LCD_WriteReg(spi,0xC1);     \n    LCD_WriteData(spi,0x13);   //18  //00\n\n    LCD_WriteReg(spi,0xC2);     \n    LCD_WriteData(spi,0xA7);   \n\n    LCD_WriteReg(spi,0xC5);     \n    LCD_WriteData(spi,0x0A);   \n\n    LCD_WriteReg(spi,0xE8);     \n    LCD_WriteData(spi,0x40);\n    LCD_WriteData(spi,0x8A);\n    LCD_WriteData(spi,0x00);\n    LCD_WriteData(spi,0x00);\n    LCD_WriteData(spi,0x29);\n    LCD_WriteData(spi,0x19);\n    LCD_WriteData(spi,0xA5);\n    LCD_WriteData(spi,0x33);\n\n    LCD_WriteReg(spi,0xE0);\n    LCD_WriteData(spi,0xD0);\n    LCD_WriteData(spi,0x08);\n    LCD_WriteData(spi,0x0F);\n    LCD_WriteData(spi,0x06);\n    LCD_WriteData(spi,0x06);\n    LCD_WriteData(spi,0x33);\n    LCD_WriteData(spi,0x30);\n    LCD_WriteData(spi,0x33);\n    LCD_WriteData(spi,0x47);\n    LCD_WriteData(spi,0x17);\n    LCD_WriteData(spi,0x13);\n    LCD_WriteData(spi,0x13);\n    LCD_WriteData(spi,0x2B);\n    LCD_WriteData(spi,0x31);\n\n    LCD_WriteReg(spi,0xE1);\n    LCD_WriteData(spi,0xD0);\n    LCD_WriteData(spi,0x0A);\n    LCD_WriteData(spi,0x11);\n    LCD_WriteData(spi,0x0B);\n    LCD_WriteData(spi,0x09);\n    LCD_WriteData(spi,0x07);\n    LCD_WriteData(spi,0x2F);\n    LCD_WriteData(spi,0x33);\n    LCD_WriteData(spi,0x47);\n    LCD_WriteData(spi,0x38);\n    LCD_WriteData(spi,0x15);\n    LCD_WriteData(spi,0x16);\n    LCD_WriteData(spi,0x2C);\n    LCD_WriteData(spi,0x32);\n\n\n    LCD_WriteReg(spi,0xF0);     \n    LCD_WriteData(spi,0x3C);   \n\n    LCD_WriteReg(spi,0xF0);     \n    LCD_WriteData(spi,0x69);   \n\n    mdelay(120);                \n\n    LCD_WriteReg(spi,0x21);     \n    LCD_WriteReg(spi,0x29); \n\n    /* \u6a2a\u5411\u663e\u793a */\n    LCD_WriteReg(spi,0x36);  \n    LCD_WriteData(spi,0x28);      \n\n    printk(KERN_ALERT \"LCD init ok!\\r\\n\");\n\n    LCD_Disp_Pic(spi);\n}\n\nstatic int lcd_gpio_init(struct spi_device *spi)\n{\n    int ret;\n    int flag1,flag2;\n\n    /* \u83b7\u53d6GPIO */\n    spi_st7796u_lcd.dc_gpio = of_get_named_gpio_flags(spi-&gt;dev.of_node, \"dc-gpios\", 0, (enum of_gpio_flags *)&amp;flag1);\n    ret = gpio_is_valid(spi_st7796u_lcd.dc_gpio);\n    if(ret &lt; 0)\n    {\n        printk(KERN_ALERT \"get dc gpio failed !\\r\\n\");\n        return -EINVAL;\n    }\n    ret = gpio_request(spi_st7796u_lcd.dc_gpio,\"dc-gpios\");\n    if(ret &lt; 0)\n    {\n        printk(KERN_ALERT \"request gpio dc failed !\\r\\n\");\n        gpio_free(spi_st7796u_lcd.dc_gpio);\n    }\n    printk(KERN_ALERT \"dc gpio num is %d !\\r\\n\",spi_st7796u_lcd.dc_gpio);\n\n    spi_st7796u_lcd.rest_gpio = of_get_named_gpio_flags(spi-&gt;dev.of_node, \"reset-gpios\", 0, (enum of_gpio_flags *)&amp;flag2);\n    ret = gpio_is_valid(spi_st7796u_lcd.rest_gpio);\n    if(ret &lt; 0)\n    {\n        printk(KERN_ALERT \"get rest gpio failed !\\r\\n\");\n        return -EINVAL;\n    }\n    ret = gpio_request(spi_st7796u_lcd.rest_gpio,\"reset-gpios\");\n    if(ret &lt; 0)\n    {\n        printk(KERN_ALERT \"request gpio rest failed !\\r\\n\");\n        gpio_free(spi_st7796u_lcd.rest_gpio);\n    }\n    printk(KERN_ALERT \"rest gpio num is %d !\\r\\n\",spi_st7796u_lcd.rest_gpio);\n\n    /* \u8bbe\u7f6e\u65b9\u5411 */\n    gpio_direction_output(spi_st7796u_lcd.dc_gpio,0);\n    gpio_direction_output(spi_st7796u_lcd.rest_gpio,0);\n\n    return ret;\n}\n\n/*\n * @description         : \u6253\u5f00\u8bbe\u5907\n * @param \u2013 inode       : \u4f20\u9012\u7ed9\u9a71\u52a8\u7684inode\n * @param - filp        : \u8bbe\u5907\u6587\u4ef6\uff0cfile\u7ed3\u6784\u4f53\u6709\u4e2a\u53eb\u505aprivate_data\u7684\u6210\u5458\u53d8\u91cf\n *                        \u4e00\u822c\u5728open\u7684\u65f6\u5019\u5c06private_data\u6307\u5411\u8bbe\u5907\u7ed3\u6784\u4f53\u3002\n * @return              : 0 \u6210\u529f;\u5176\u4ed6 \u5931\u8d25\n */\nstatic int spi_st7796u_lcd_open(struct inode *inode, struct file *filp)\n{\n    filp-&gt;private_data = &amp;spi_st7796u_lcd;\n    return 0;\n}\n\n/*\n * @description         : \u4ece\u8bbe\u5907\u8bfb\u53d6\u6570\u636e \n * @param \u2013 filp        : \u8981\u6253\u5f00\u7684\u8bbe\u5907\u6587\u4ef6(\u6587\u4ef6\u63cf\u8ff0\u7b26)\n * @param - buf         : \u8fd4\u56de\u7ed9\u7528\u6237\u7a7a\u95f4\u7684\u6570\u636e\u7f13\u51b2\u533a\n * @param - cnt         : \u8981\u8bfb\u53d6\u7684\u6570\u636e\u957f\u5ea6\n * @param \u2013 off         : \u76f8\u5bf9\u4e8e\u6587\u4ef6\u9996\u5730\u5740\u7684\u504f\u79fb\n * @return              : \u8bfb\u53d6\u7684\u5b57\u8282\u6570\uff0c\u5982\u679c\u4e3a\u8d1f\u503c\uff0c\u8868\u793a\u8bfb\u53d6\u5931\u8d25\n */\nstatic ssize_t spi_st7796u_lcd_read(struct file *filp, char __user *buf,\n            size_t cnt, loff_t *off)\n{\n    return 0;\n}\n\n/*\n * @description         : \u5411\u8bbe\u5907\u5199\u6570\u636e \n * @param \u2013 filp        : \u8bbe\u5907\u6587\u4ef6\uff0c\u8868\u793a\u6253\u5f00\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\n * @param - buf         : \u8981\u5199\u7ed9\u8bbe\u5907\u5199\u5165\u7684\u6570\u636e\n * @param - cnt         : \u8981\u5199\u5165\u7684\u6570\u636e\u957f\u5ea6\n * @param - offt        : \u76f8\u5bf9\u4e8e\u6587\u4ef6\u9996\u5730\u5740\u7684\u504f\u79fb\n * @return              : \u5199\u5165\u7684\u5b57\u8282\u6570\uff0c\u5982\u679c\u4e3a\u8d1f\u503c\uff0c\u8868\u793a\u5199\u5165\u5931\u8d25\n */\nstatic ssize_t spi_st7796u_lcd_write(struct file *filp, const char __user *buf,\n            size_t cnt, loff_t *offt)\n{\n    return 0;\n}\n\n\nstatic ssize_t spi_st7796u_lcd_write_reg(struct spi_device *spi, unsigned char c)\n{\n    //struct spi_st7796u_lcd_dev *dev = spi_dev-&gt;private_data;\n    struct spi_message msg = {0};\n    struct spi_transfer xfer = {0};\n    unsigned char tx;\n    int ret;\n\n    xfer.tx_buf = &amp;tx;      /* \u53d1\u9001\u6570\u636e\u7f13\u5b58\u533a */\n    xfer.bits_per_word = 8; /* \u4e00\u6b21\u4f20\u8f938\u4e2abit */\n    xfer.len = 1;           /* \u4f20\u8f93\u957f\u5ea6\u4e3a2\u4e2a\u5b57\u8282\uff1a\u5bc4\u5b58\u5668\u5730\u5740+\u5199\u5165\u503c */\n\n    tx = c;         /* \u8981\u5199\u5165\u7684\u4ece\u673a\u8bbe\u5907\u5bc4\u5b58\u5668\u5730\u5740\uff08\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u5bc4\u5b58\u5668\u5730\u5740\u662f\u4e00\u4e2a\u5b57\u8282\uff09 */\n    spi_message_init(&amp;msg); /* \u521d\u59cb\u5316spi_message */\n    spi_message_add_tail(&amp;xfer, &amp;msg);  /* \u5c06spi_transfer\u6dfb\u52a0\u5230spi_message */\n    //ret = spi_sync(dev-&gt;spi, &amp;msg);       /* \u6267\u884c\u540c\u6b65\u6570\u636e\u4f20\u8f93 */\n    ret = spi_sync(spi, &amp;msg);      /* \u6267\u884c\u540c\u6b65\u6570\u636e\u4f20\u8f93 */\n    if (ret)\n        return ret;\n\n    printk(KERN_ALERT \"spi test\\r\\n\");\n\n    return 0;\n}\n\n/*\n * @description         : \u5173\u95ed/\u91ca\u653e\u8bbe\u5907\n * @param - filp        : \u8981\u5173\u95ed\u7684\u8bbe\u5907\u6587\u4ef6(\u6587\u4ef6\u63cf\u8ff0\u7b26)\n * @return              : 0 \u6210\u529f;\u5176\u4ed6 \u5931\u8d25\n */\nstatic int spi_st7796u_lcd_release(struct inode *inode, struct file *filp)\n{\n    return 0;\n}\n\n/*\n * file_operations\u7ed3\u6784\u4f53\u53d8\u91cf\n */\nstatic const struct file_operations spi_st7796u_lcd_ops = {\n    .owner = THIS_MODULE,\n    .open = spi_st7796u_lcd_open,\n    .read = spi_st7796u_lcd_read,\n    .write = spi_st7796u_lcd_write,\n    .release = spi_st7796u_lcd_release,\n};\n\nstatic int spi_st7796u_lcd_init(struct spi_st7796u_lcd_dev *dev)\n{\n    /* \u5bf9\u8bbe\u5907\u8fdb\u884c\u521d\u59cb\u5316\u64cd\u4f5c */\n    /* \u5728\u8fd9\u4e2a\u51fd\u6570\u4e2d\u5bf9SPI\u4ece\u673a\u8bbe\u5907\u8fdb\u884c\u76f8\u5173\u521d\u59cb\u5316\u64cd\u4f5c */\n    /* ...... */\n    return 0;\n}\n\nstatic int spi_st7796u_lcd_probe(struct spi_device *spi)\n{\n    int ret;\n    struct fb_info *fbi;\n\n    printk(KERN_ALERT \"spi_lcd_probe ok!\\r\\n\");\n\n    /* \u521d\u59cb\u5316\u865a\u62df\u8bbe\u5907 */\n    ret = spi_st7796u_lcd_init(&amp;spi_st7796u_lcd);\n    if (ret)\n        return ret;\n\n    /* \u7533\u8bf7\u8bbe\u5907\u53f7 */\n    ret = alloc_chrdev_region(&amp;spi_st7796u_lcd.devid, 0, 1, DEVICE_NAME);\n    if (ret)\n        return ret;\n\n    /* \u521d\u59cb\u5316\u5b57\u7b26\u8bbe\u5907cdev */\n    spi_st7796u_lcd.cdev.owner = THIS_MODULE;\n    cdev_init(&amp;spi_st7796u_lcd.cdev, &amp;spi_st7796u_lcd_ops);\n\n    /* \u6dfb\u52a0cdev */\n    ret = cdev_add(&amp;spi_st7796u_lcd.cdev, spi_st7796u_lcd.devid, 1);\n    if (ret)\n        goto out1;\n\n    /* \u521b\u5efa\u7c7bclass */\n    spi_st7796u_lcd.class = class_create(THIS_MODULE, DEVICE_NAME);\n    if (IS_ERR(spi_st7796u_lcd.class)) {\n        ret = PTR_ERR(spi_st7796u_lcd.class);\n        goto out2;\n    }\n\n    /* \u521b\u5efa\u8bbe\u5907 */\n    spi_st7796u_lcd.device = device_create(spi_st7796u_lcd.class, &amp;spi-&gt;dev,\n                spi_st7796u_lcd.devid, NULL, DEVICE_NAME);\n    if (IS_ERR(spi_st7796u_lcd.device)) {\n        ret = PTR_ERR(spi_st7796u_lcd.device);\n        goto out3;\n    }\n\n    /*\u521d\u59cb\u5316spi_device */\n    spi_st7796u_lcd.private_data = spi;\n\n    /* \u521d\u59cb\u5316lcd\u5c4f\u7684dc rest\u7ba1\u811a */\n    lcd_gpio_init(spi);\n\n    /* \u5185\u90e8\u5bc4\u5b58\u5668\u521d\u59cb\u5316 */\n    lcd_reg_init(spi);\n\n    /* \u521d\u59cb\u5316fb\u8bbe\u5907 */\n    fbi = fb_init(spi);\n\n    return 0;\n\nout3:\n    class_destroy(spi_st7796u_lcd.class);\n\nout2:\n    cdev_del(&amp;spi_st7796u_lcd.cdev);\n\nout1:\n    unregister_chrdev_region(spi_st7796u_lcd.devid, 1);\n\n    return ret;\n}\n\nstatic int spi_st7796u_lcd_remove(struct spi_device *spi)\n{\n    struct spi_st7796u_lcd_dev *dev = spi_get_drvdata(spi);\n\n    /* fb\u8bbe\u5907\u56de\u6536 */\n    fb_del(spi);\n\n    /* \u6ce8\u9500\u8bbe\u5907 */\n    device_destroy(dev-&gt;class, dev-&gt;devid);\n\n    /* \u6ce8\u9500\u7c7b */\n    class_destroy(dev-&gt;class);\n\n    /* \u5220\u9664cdev */\n    cdev_del(&amp;dev-&gt;cdev);\n\n    /* \u6ce8\u9500\u8bbe\u5907\u53f7 */\n    unregister_chrdev_region(dev-&gt;devid, 1);\n\n    return 0;\n}\n\n/* \u5339\u914d\u5217\u8868 */\nstatic const struct of_device_id spi_st7796u_lcd_of_match[] = {\n    { .compatible = \"sitronix,st7796\" },\n    { /* Sentinel */ }\n};\n\n/* SPI\u603b\u7ebf\u4e0b\u7684\u8bbe\u5907\u9a71\u52a8\u7ed3\u6784\u4f53\u53d8\u91cf */\nstatic struct spi_driver spi_st7796u_lcd_driver = {\n    .driver = {\n        .name           = \"st7796u\",\n        .of_match_table = spi_st7796u_lcd_of_match,\n    },\n    .probe      = spi_st7796u_lcd_probe,        // probe\u51fd\u6570\n    .remove     = spi_st7796u_lcd_remove,       // remove\u51fd\u6570\n};\n\nmodule_spi_driver(spi_st7796u_lcd_driver);\n\nMODULE_AUTHOR(\"WQH\");\nMODULE_DESCRIPTION(\"st7796u_spi_lcd\");\nMODULE_LICENSE(\"GPL\");\n</code></pre>"},{"location":"linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","title":"Linux\u5e38\u7528\u547d\u4ee4","text":"<ul> <li> <p>\u5e2e\u52a9  </p> <ul> <li> <p>man \u547d\u4ee4  </p> <ul> <li> <p>Linux\u547d\u4ee4  </p> <ul> <li> <p>\u78c1\u76d8\u7ba1\u7406\u547d\u4ee4  </p> <ul> <li> <p>\u67e5\u770b\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55  </p> <ul> <li>pwd  </li> </ul> </li> <li> <p>\u6539\u53d8\u5f53\u524d\u76ee\u5f55  </p> <ul> <li>cd  <ul> <li>\u683c\u5f0fcd direction_name  </li> </ul> </li> </ul> </li> <li> <p>\u663e\u793a\u5f53\u524d\u76ee\u5f55\u6216\u6587\u4ef6\u4fe1\u606f  </p> <ul> <li> <p>ls  </p> <ul> <li> <p>\u683c\u5f0fls [-option] direction_name  </p> </li> <li> <p>option  </p> <ul> <li> <p>-a:\u663e\u793a\u6240\u6709\u6587\u4ef6\u548c\u76ee\u5f55  </p> </li> <li> <p>-I:\u4ee5\u957f\u683c\u5f0f\u663e\u793a\u6587\u4ef6\u4fe1\u606f(\u540cll\u547d\u4ee4)  </p> </li> <li> <p>-r:\u5c06\u76ee\u5f55\u4ee5\u53cd\u6b21\u5e8f\u663e\u793a  </p> </li> <li> <p>-t:\u65b0\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u663e\u793a\u5728\u524d  </p> </li> <li> <p>-R:\u82e5\u76ee\u5f55\u4e0b\u6709\u6587\u4ef6\uff0c\u5219\u5217\u51fa\u6240\u6709\u6587\u4ef6  </p> </li> <li> <p>etc  </p> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u521b\u5efa\u76ee\u5f55  </p> <ul> <li> <p>mkdir  </p> <ul> <li> <p>\u683c\u5f0fmkdir \uff3b-p\uff3d dir-name 1 dir-name 2 \u2026  </p> </li> <li> <p>option  </p> <ul> <li>-p:\u521b\u5efa\u4e00\u4e2a\u76ee\u5f55\u6811  </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u5220\u9664\u7a7a\u76ee\u5f55  </p> <ul> <li> <p>rmdir  </p> <ul> <li> <p>\u683c\u5f0frmdir [-p] dir-name  </p> </li> <li> <p>option  </p> <ul> <li>-p:\u82e5\u5b50\u76ee\u5f55\u5220\u9664\u540e\uff0c\u8be5\u76ee\u5f55\u4e3a\u7a7a\uff0c\u5219\u4e00\u5e76\u5220\u9664  </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u6587\u4ef6\u7ba1\u7406\u547d\u4ee4  </p> <ul> <li> <p>\u5220\u9664\u6587\u4ef6\u6216\u76ee\u5f55  </p> <ul> <li> <p>rm  </p> <ul> <li>\u683c\u5f0frm [-option] \u6587\u4ef6\u6216\u76ee\u5f55  </li> </ul> </li> <li> <p>option  </p> <ul> <li> <p>-r\u6216-R:\u5c06\u6307\u5b9a\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6\u53ca\u5b50\u76ee\u5f55\u4e00\u5e76\u5904\u7406  </p> </li> <li> <p>-f:\u5f3a\u5236\u5220\u9664\u6587\u4ef6\u6216\u76ee\u5f55  </p> </li> <li> <p>-i:\u5220\u9664\u6587\u4ef6\u6216\u76ee\u5f55\u524d\u5148\u8be2\u95ee\u7528\u6237  </p> </li> <li> <p>-v:\u663e\u793a\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b  </p> </li> </ul> </li> </ul> </li> <li> <p>\u79fb\u52a8\u6587\u4ef6\u6216\u91cd\u547d\u540d  </p> <ul> <li> <p>mv  </p> <ul> <li> <p>\u683c\u5f0fmv [-option] \u6e90\u6587\u4ef6\u6216\u76ee\u5f55 \u76ee\u6807\u6587\u4ef6\u6216\u76ee\u5f55  </p> </li> <li> <p>option  </p> <ul> <li> <p>-b:\u82e5\u8986\u76d6\u6587\u4ef6\uff0c\u5219\u8986\u76d6\u524d\u5148\u5907\u4efd  </p> </li> <li> <p>-v:\u6267\u884c\u65f6\u663e\u793a\u8fc7\u7a0b  </p> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u6587\u4ef6\u590d\u5236  </p> <ul> <li> <p>cp  </p> <ul> <li> <p>\u683c\u5f0fcp [-option] \u6e90\u6587\u4ef6\u6216\u76ee\u5f55 \u76ee\u6807\u6587\u4ef6\u6216\u76ee\u5f55  </p> </li> <li> <p>option  </p> <ul> <li> <p>-a:\u901a\u5e38\u5728\u590d\u5236\u76ee\u5f55\u65f6\u4f7f\u7528\u3002\u5b83\u4fdd\u7559\u94fe\u63a5\u3001\u6587\u4ef6\u5c5e\u6027\uff0c\u5e76\u9012\u5f52\u7684\u590d\u5236\u76ee\u5f55\uff0c\u4f5c\u7528\u76f8\u5f53\u4e8e-dpr\u7ec4\u5408  </p> </li> <li> <p>-d:\u590d\u5236\u65f6\u4fdd\u7559\u94fe\u63a5  </p> </li> <li> <p>-f:\u5220\u9664\u5df2\u5b58\u5728\u7684\u76ee\u6807\u6587\u4ef6\u800c\u4e0d\u663e\u793a  </p> </li> <li> <p>-i:\u590d\u5236\u524d\u8be2\u95ee\u7528\u6237  </p> </li> <li> <p>-p:\u9664\u590d\u5236\u6587\u4ef6\u5916\uff0c\u8fd8\u5c06\u4fee\u6539\u65f6\u95f4\u548c\u8bbf\u95ee\u6743\u9650\u4e5f\u590d\u5236\u5230\u6587\u4ef6\u4e2d  </p> </li> <li> <p>-r:\u82e5\u7ed9\u51fa\u7684\u6e90\u6587\u4ef6\u662f\u76ee\u5f55\uff0c\u5219\u9012\u5f52\u590d\u5236\u8be5\u76ee\u5f55\u4e0b\u6240\u6709\u5b50\u76ee\u5f55\u548c\u6587\u4ef6\uff0c\u6b64\u65f6\u76ee\u6807\u5fc5\u987b\u662f\u76ee\u5f55  </p> </li> <li> <p>\u6ce8\u610f\uff01\uff01\u76ee\u5f55\u4e0d\u80fd\u590d\u5236\u5230\u76ee\u5f55\u672c\u8eab  </p> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u6253\u5305\u89e3\u538b  </p> <ul> <li> <p>tar  </p> <ul> <li> <p>\u683c\u5f0f:tar [-option] \u540d\u5b57.tar \u88ab\u6253\u5305\u7684\u6587\u4ef6\u6216\u76ee\u5f55  </p> </li> <li> <p>option  </p> <ul> <li> <p>-c:\u751f\u6210\u6863\u6848\u6587\u4ef6\uff0c\u521b\u5efa\u6253\u5305\u6587\u4ef6  </p> </li> <li> <p>-v:\u663e\u793a\u6267\u884c\u8fc7\u7a0b  </p> </li> <li> <p>-f:\u6307\u5b9a\u6863\u6848\u6587\u4ef6\u540d\u79f0\uff0cf \u540e\u9762\u4e00\u5b9a\u662f .tar \u6587\u4ef6\uff0c\u6240\u4ee5\u5fc5\u987b\u653e\u9009\u9879\u6700\u540e  </p> </li> <li> <p>-x:\u89e3\u5f00\u65b9\u6848\u6587\u4ef6  </p> </li> <li> <p>-z:\u8c03\u7528gzip,\u5bf9\u6253\u5305\u6587\u4ef6\u8fdb\u884c\u538b\u7f29\uff0c\u751f\u6210.gz  </p> </li> <li> <p>tar -zxvf \u6253\u5305\u6587\u4ef6.tar.gz -C \u76ee\u6807\u8def\u5f84  </p> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u4fee\u6539\u6743\u9650\u547d\u4ee4  </p> <ul> <li> <p>chmod  </p> <ul> <li> <p>\u683c\u5f0fchmod [-option] mode filename  </p> </li> <li> <p>option  </p> <ul> <li> <p>-c:\u82e5\u6587\u4ef6\u6743\u9650\u786e\u5b9e\u66f4\u6539\uff0c\u5219\u663e\u793a\u66f4\u6539\u52a8\u4f5c  </p> </li> <li> <p>-f:\u82e5\u8be5\u6587\u4ef6\u6743\u9650\u65e0\u6cd5\u66f4\u6539\uff0c\u5219\u4e0d\u663e\u793a\u9519\u8bef\u4fe1\u606f  </p> </li> <li> <p>-v:\u663e\u793a\u6743\u9650\u66f4\u6539\u7684\u8be6\u7ec6\u4fe1\u606f  </p> </li> <li> <p>-R:\u5bf9\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6\u4e0e\u5b50\u76ee\u5f55\u8fdb\u884c\u76f8\u540c\u7684\u6743\u9650\u53d8\u66f4  </p> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u4fee\u6539\u6240\u6709\u8005  </p> <ul> <li> <p>chown  </p> <ul> <li> <p>\u683c\u5f0fchown [-option] \u8d26\u53f7\u540d\u79f0 \u6587\u4ef6\u6216\u76ee\u5f55  </p> </li> <li> <p>chown [-option] \u8d26\u53f7\u540d\u79f0:\u7ec4\u540d\u79f0 \u6587\u4ef6\u6216\u76ee\u5f55  </p> </li> <li> <p>option  </p> <ul> <li>-R:\u9012\u5f52\u53d8\u66f4\uff0c\u5373\u8fde\u540c\u6b21\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6(\u5939)\u90fd\u8981\u53d8\u66f4  </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u4fee\u6539\u7528\u6237\u7ec4  </p> <ul> <li>chgrp  <ul> <li>\u683c\u5f0fchgrp [-options] [\u7fa4\u7ec4\u540d] [\u6587\u6863\u8def\u5f84]  </li> </ul> </li> </ul> </li> <li> <p>\u67e5\u627e\u6587\u4ef6  </p> <ul> <li>find  <ul> <li> <p>\u683c\u5f0ffind pathname -options [-print-exec-ok\u2026]  </p> <ul> <li> <p>pathname:\u82e5\u67e5\u76ee\u5f55\u8def\u5f84  </p> </li> <li> <p>print:\u5c06\u5339\u914d\u7684\u6587\u4ef6\u5339\u914d\u5230\u6807\u51c6\u8f93\u51fa  </p> </li> <li> <p>exec:\u5c06\u5339\u914d\u7684\u6587\u4ef6\u6267\u884c\u8be5\u53c2\u6570\u6240\u7ed9\u51fa\u7684Shell\u547d\u4ee4\uff0c\u6267\u884c\u6bcf\u4e2a\u547d\u4ee4\u90fd\u4f1a\u8be2\u95ee\u7528\u6237\u662f\u5426\u6267\u884c  </p> </li> <li> <p>\u5e38\u7528\u9009\u9879  </p> <ul> <li> <p>-name:\u6309\u540d\u5b57\u67e5  </p> </li> <li> <p>-mtime -n +n:\u6309\u66f4\u6539\u65f6\u95f4\u67e5\uff0c+n n\u5929\u4ee5\u524d\uff0c-n n\u5929\u4ee5\u5185  </p> </li> <li> <p>-depth:\u5148\u67e5\u5f53\u524d\u76ee\u5f55\uff0c\u518d\u5b50\u76ee\u5f55  </p> </li> <li> <p>etc  </p> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u67e5\u8be2\u663e\u793a\u5305\u542b\u6307\u5b9a\u5b57\u7b26\u7684\u884c  </p> <ul> <li> <p>grep  </p> <ul> <li> <p>\u683c\u5f0fgrep [-option] \u67e5\u8be2\u6761\u4ef6 \u76ee\u6807\u6587\u4ef6  </p> </li> <li> <p>option  </p> <ul> <li> <p>-i:\u67e5\u627e\u65f6\u5ffd\u7565\u5927\u5c0f\u5199  </p> </li> <li> <p>-v:\u67e5\u627e\u4e0d\u7b26\u5408\u6761\u4ef6\u884c  </p> </li> </ul> </li> <li> <p>\u67e5\u627e\u6761\u4ef6  </p> <ul> <li> <p>\"^\u2026\":\u4ee5\u4ec0\u4e48\u5f00\u5934  </p> </li> <li> <p>\"\u2026$\"\uff1a\u4ee5\u4ec0\u4e48\u7ed3\u5c3e  </p> </li> <li> <p>\"^$\":\u7a7a\u884c  </p> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u663e\u793a\u6587\u4ef6\u7c7b\u578b  </p> <ul> <li> <p>file  </p> <ul> <li> <p>\u683c\u5f0ffile [-optoin] \u6587\u4ef6\u540d  </p> </li> <li> <p>option  </p> <ul> <li> <p>-b:\u663e\u793a\u6587\u4ef6\u7c7b\u578b\uff0c\u4f46\u4e0d\u663e\u793a\u540d\u5b57  </p> </li> <li> <p>-c:\u663e\u793a\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b  </p> </li> <li> <p>-v:\u663e\u793a\u7248\u672c\u4fe1\u606f  </p> </li> <li> <p>-z:\u5c1d\u8bd5\u89e3\u8bfb\u538b\u7f29\u6587\u4ef6\u5185\u5bb9  </p> </li> <li> <p>-L:\u76f4\u63a5\u663e\u793a\u7b26\u53f7\u6240\u94fe\u63a5\u7684\u6587\u4ef6\u7c7b\u578b  </p> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>\u547d\u4ee4 \u2014\u2014help</p> </li> </ul> </li> </ul>"},{"location":"%E5%B8%B8%E8%A7%81repo%26git%E6%93%8D%E4%BD%9C/","title":"\u5e38\u89c1repo&git\u64cd\u4f5c","text":"repo\u547d\u4ee4 \u7b49\u540cgit\u547d\u4ee4 \u5907\u6ce8 repo init -u \u65e0 \u521d\u59cb\u5316 repo sync git pull \u540c\u6b65\u4ee3\u7801 repo upload git push \u4e0a\u4f20\u4ee3\u7801 repo forall \u65e0 \u591a\u4ed3\u6267\u884c repo start git checkout -b \u521b\u5efa\u5e76\u5207\u6362\u5206\u652f repo checkout git checkout \u5207\u6362\u5206\u652f repo status git status \u72b6\u6001\u67e5\u8be2 repo branches git branch \u5206\u652f\u67e5\u8be2 repo diff git diff \u6587\u4ef6\u5bf9\u6bd4 repo prune \u65e0 \u5220\u9664\u5408\u5e76\u5206\u652f repo stage \u2013i git add --interactive \u6dfb\u52a0\u6587\u4ef6\u5230\u6682\u5b58\u533a repo abandon git branch -D \u5220\u9664\u5206\u652f repo version \u65e0 \u67e5\u770b\u7248\u672c\u53f7 <ol> <li>\u5c06HEAD\u5f3a\u5236\u6307\u5411manifest\u7684\u5e93\uff0c\u800c\u5ffd\u7565\u672c\u5730\u7684\u6539\u52a8         `repo\u00a0sync\u00a0-d</li> <li>Remove all working directory (and staged) changes       `repo forall -c 'git\u00a0\u00a0--hard'</li> <li>Clean untracked files       `repo forall -c 'git clean -f -d'</li> <li>\u62c9\u4ee3\u7801       <code>repo sync -c</code> </li> </ol>"},{"location":"%E5%BC%82%E6%AD%A5IO/","title":"select","text":"<p>\u51fd\u6570\u539f\u578b</p> <pre><code>int select(int nfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct\\ timeval *timeout)\n</code></pre> <p>1\u3001nfds:\u8981\u64cd\u4f5c\u7684\u6587\u4ef6\u4e2a\u6570</p>"},{"location":"%E6%89%93%E5%BC%80%E3%80%81%E8%AF%BB%E3%80%81%E5%86%99%E5%87%BD%E6%95%B0/","title":"\u7cfb\u7edf\u8c03\u7528\uff08linux\uff09","text":"<pre><code>\u9700\u8981\u5305\u542b\u5934\u6587\u4ef6:\n#include&lt;sys/types.h&gt;  \n#include&lt;sys/stat.h&gt;  \n#include&lt;fcntl.h&gt;\n\nint open( const char * pathname, int oflags);\noflags:\n    O_RDONLY \u53ea\u8bfb\u6a21\u5f0f  \n    O_WRONLY \u53ea\u5199\u6a21\u5f0f  \n    O_RDWR \u8bfb\u5199\u6a21\u5f0f  \n    \u4ee5\u4e0a\u4e09\u8005\u662f\u4e92\u65a5\u7684\uff0c\u5373\u4e0d\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\n\u8fd4\u56de\u503c\uff1a\n    \u6210\u529f\u5219\u8fd4\u56de\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u5426\u5219\u8fd4\u56de -1\u3002\n\nssize_t write(int fd,const void*buf,size_t count); \n\u53c2\u6570\u8bf4\u660e\uff1a \n    fd:\u662f\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08write\u6240\u5bf9\u5e94\u7684\u662f\u5199\uff0c\u5373\u5c31\u662f1\uff09 \n    buf:\u901a\u5e38\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u9700\u8981\u5199\u5165\u7684\u5b57\u7b26\u4e32 \n    count\uff1a\u662f\u6bcf\u6b21\u5199\u5165\u7684\u5b57\u8282\u6570\n\u6210\u529f\uff1a\u8fd4\u56de\u5199\u5165\u7684\u5b57\u8282\u6570 \n\u5931\u8d25\uff1a\u8fd4\u56de-1\u5e76\u8bbe\u7f6eerrno ps\uff1a \n\u5199\u5e38\u89c4\u6587\u4ef6\u65f6\uff0cwrite\u7684\u8fd4\u56de\u503c\u901a\u5e38\u7b49\u4e8e\u8bf7\u6c42\u5199\u7684\u5b57\u8282 \u6570count,\u800c\u5411\u7ec8\u7aef\u8bbe\u5907\u6216\u8005\u7f51\u7edc\u5199\u65f6\u5219\u4e0d\u4e00\u5b9a\n\nssize_t read(int fd,void*buf,size_t count)\n\u53c2\u6570\u8bf4\u660e\uff1a\n    fd:      \u662f\u6587\u4ef6\u63cf\u8ff0\u7b26\n    buf:     \u4e3a\u8bfb\u51fa\u6570\u636e\u7684\u7f13\u51b2\u533a\uff1b\n    count:   \u4e3a\u6bcf\u6b21\u8bfb\u53d6\u7684\u5b57\u8282\u6570\uff08\u662f\u8bf7\u6c42\u8bfb\u53d6\u7684\u5b57\u8282\u6570\uff0c\u8bfb\u4e0a\u6765\u7684\u6570\u636e\u4fdd\n             \u5b58\u5728\u7f13\u51b2\u533abuf\u4e2d\uff0c\u540c\u65f6\u6587\u4ef6\u7684\u5f53\u524d\u8bfb\u5199\u4f4d\u7f6e\u5411\u540e\u79fb\uff09\n\n\u6210\u529f\uff1a\u8fd4\u56de\u8bfb\u51fa\u7684\u5b57\u8282\u6570 \u5931\u8d25\uff1a\u8fd4\u56de-1\uff0c\u5e76\u8bbe\u7f6eerrno\uff0c\u5982\u679c\u5728\u8c03\u7528read \u4e4b\u524d\u5230\u8fbe\u6587\u4ef6\u672b\u5c3e\uff0c\u5219\u8fd9\u6b21read\u8fd4\u56de0\n\n</code></pre>"},{"location":"%E6%89%93%E5%BC%80%E3%80%81%E8%AF%BB%E3%80%81%E5%86%99%E5%87%BD%E6%95%B0/#c","title":"C\u5e93\u51fd\u6570","text":"<pre><code>\u9700\u8981\u5305\u542b\u5934\u6587\u4ef6:\n#include &lt;stdio.h&gt;\n\nFILE * fopen(const char * path, const char * mode);\n\npath\u5b57\u7b26\u4e32\u5305\u542b\u6b32\u6253\u5f00\u7684\u6587\u4ef6\u8def\u5f84\u53ca\u6587\u4ef6\u540d\uff0c\u53c2\u6570mode\u5b57\u7b26\u4e32\u5219\u4ee3\u8868\u7740\u6d41\u5f62\u6001\u3002  \nmode\u6709\u4e0b\u5217\u51e0\u79cd\u5f62\u6001\u5b57\u7b26\u4e32:  \n    \u201cr\"\u6216\"rb\u201d \u4ee5\u53ea\u8bfb\u65b9\u5f0f\u6253\u5f00\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u5fc5\u987b\u5b58\u5728\u3002  \n    \u201cw\"\u6216\"wb\u201d \u4ee5\u5199\u65b9\u5f0f\u6253\u5f00\u6587\u4ef6\uff0c\u5e76\u628a\u6587\u4ef6\u957f\u5ea6\u622a\u77ed\u4e3a\u96f6\u3002  \n    \u201ca\"\u6216\"ab\u201d \u4ee5\u5199\u65b9\u5f0f\u6253\u5f00\u6587\u4ef6\uff0c\u65b0\u5185\u5bb9\u8ffd\u52a0\u5728\u6587\u4ef6\u5c3e\u3002  \n    \"r+\"\u6216\"rb+\u201c\u6216\"r+b\u201d \u4ee5\u66f4\u65b0\u65b9\u5f0f\u6253\u5f00\uff08\u8bfb\u548c\u5199\uff09  \n    \"w+\"\u6216\"wb+\u201c\u6216\"w+b\u201d \u4ee5\u66f4\u65b0\u65b9\u5f0f\u6253\u5f00,\u5e76\u628a\u6587\u4ef6\u957f\u5ea6\u622a\u77ed\u4e3a\u96f6\u3002  \n    \"a+\"\u6216\"ab+\u201c\u6216\"a+b\u201d \u4ee5\u66f4\u65b0\u65b9\u5f0f\u6253\u5f00\uff0c\u65b0\u5185\u5bb9\u8ffd\u52a0\u5728\u6587\u4ef6\u5c3e\u3002  \n    \u5b57\u6bcdb\u8868\u793a\u6587\u4ef6\u65f6\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\u800c\u4e0d\u662f\u6587\u672c\u6587\u4ef6\u3002\uff08linux\u4e0b\u4e0d\u533a\u5206\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u6587\u672c\u6587\u4ef6\uff09  \n\u8fd4\u56de\u503c\uff1a\n    \u6587\u4ef6\u987a\u5229\u6253\u5f00\u540e\uff0c\u6307\u5411\u8be5\u6d41\u7684\u6587\u4ef6\u6307\u9488\u5c31\u4f1a\u88ab\u8fd4\u56de\u3002\u5982\u679c\u6587\u4ef6\u6253\u5f00\u5931\u8d25\u5219\u8fd4\u56deNULL\uff0c\u5e76\u628a\u9519\u8bef\u4ee3\u7801\u5b58\u5728errno \u4e2d\u3002\n\nsize_t fread ( void *buffer, size_t size, size_t count, FILE *stream);\n\n\u53c2\u6570\uff1a  \n    buffer\uff1a\u7528\u4e8e\u63a5\u6536\u6570\u636e\u7684\u5185\u5b58\u5730\u5740  \n    size\uff1a\u8981\u8bfb\u5199\u7684\u5b57\u8282\u6570\uff0c\u5355\u4f4d\u662f\u5b57\u8282  \n    count\uff1a\u8981\u8fdb\u884c\u8bfb\u5199\u591a\u5c11\u4e2asize\u5b57\u8282\u7684\u6570\u636e\u9879,\u6bcf\u4e2a\u5143\u7d20\u662fsize\u5b57\u8282.  \n    stream\uff1a\u8f93\u5165\u6d41  \n\u8fd4\u56de\u503c\uff1a\n    \u5b9e\u9645\u8bfb\u53d6\u7684\u5143\u7d20\u4e2a\u6570.\u5982\u679c\u8fd4\u56de\u503c\u4e0ecount\u4e0d\u76f8\u540c,\u5219\u53ef\u80fd\u6587\u4ef6\u7ed3\u5c3e\u6216\u53d1\u751f\u9519\u8bef\uff0c\u4eceferror\u548cfeof\u83b7\u53d6\u9519\u8bef\u4fe1\u606f\u6216\u68c0\u6d4b\u662f\u5426\u5230\u8fbe\u6587\u4ef6\u7ed3\u5c3e.\n\nsize_t fwrite(const void* buffer, size_t size, size_t count, FILE* stream);\n\n\u53c2\u6570\uff1a  \n    buffer\uff1a\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u5bf9fwrite\u6765\u8bf4\uff0c\u662f\u8981\u83b7\u53d6\u6570\u636e\u7684\u5730\u5740\uff1b  \n    size\uff1a\u8981\u5199\u5165\u5185\u5bb9\u7684\u5355\u5b57\u8282\u6570\uff1b  \n    count:\u8981\u8fdb\u884c\u5199\u5165size\u5b57\u8282\u7684\u6570\u636e\u9879\u7684\u4e2a\u6570\uff1b  \n    stream:\u76ee\u6807\u6587\u4ef6\u6307\u9488\uff1b  \n\u8fd4\u56de\u503c:\n    \u8fd4\u56de\u5b9e\u9645\u5199\u5165\u7684\u6570\u636e\u5757\u6570\u76ee\n</code></pre>"},{"location":"%E6%89%93%E5%BC%80%E3%80%81%E8%AF%BB%E3%80%81%E5%86%99%E5%87%BD%E6%95%B0/#_1","title":"\u533a\u522b","text":""},{"location":"%E6%89%93%E5%BC%80%E3%80%81%E8%AF%BB%E3%80%81%E5%86%99%E5%87%BD%E6%95%B0/#readwritefreadfwrite","title":"read/write\u548cfread/fwrite\u533a\u522b","text":"<ol> <li>fread\u662f\u5e26\u7f13\u51b2\u7684,read\u4e0d\u5e26\u7f13\u51b2.\u00a0  </li> <li>fopen\u662f\u6807\u51c6c\u91cc\u5b9a\u4e49\u7684,open\u662fPOSIX\u4e2d\u5b9a\u4e49\u7684.\u00a0  </li> <li>fread\u53ef\u4ee5\u8bfb\u4e00\u4e2a\u7ed3\u6784.read\u5728linux/unix\u4e2d\u8bfb\u4e8c\u8fdb\u5236\u4e0e\u666e\u901a\u6587\u4ef6\u6ca1\u6709\u533a\u522b.\u00a0  </li> <li>fopen\u4e0d\u80fd\u6307\u5b9a\u8981\u521b\u5efa\u6587\u4ef6\u7684\u6743\u9650.open\u53ef\u4ee5\u6307\u5b9a\u6743\u9650.\u00a0  </li> <li>fopen\u8fd4\u56de\u6307\u9488,open\u8fd4\u56de\u6587\u4ef6\u63cf\u8ff0\u7b26(\u6574\u6570).\u00a0  </li> <li>linux/unix\u4e2d\u4efb\u4f55\u8bbe\u5907\u90fd\u662f\u6587\u4ef6,\u7528open,read.  </li> </ol> <p>\u5982\u679c\u6587\u4ef6\u7684\u5927\u5c0f\u662f8k\u3002 \u4f60\u5982\u679c\u7528read/write\uff0c\u4e14\u53ea\u5206\u914d\u4e862k\u7684\u7f13\u5b58\uff0c\u5219\u8981\u5c06\u6b64\u6587\u4ef6\u8bfb\u51fa\u9700\u8981\u505a4\u6b21\u7cfb\u7edf\u8c03\u7528\u6765\u5b9e\u9645\u4ece\u78c1\u76d8\u4e0a\u8bfb\u51fa\u3002 \u5982\u679c\u4f60\u7528fread/fwrite\uff0c\u5219\u7cfb\u7edf\u81ea\u52a8\u5206\u914d\u7f13\u5b58\uff0c\u5219\u8bfb\u51fa\u6b64\u6587\u4ef6\u53ea\u8981\u4e00\u6b21\u7cfb\u7edf\u8c03\u7528\u4ece\u78c1\u76d8\u4e0a\u8bfb\u51fa\u3002 \u4e5f\u5c31\u662f\u7528read/write\u8981\u8bfb4\u6b21\u78c1\u76d8\uff0c\u800c\u7528fread/fwrite\u5219\u53ea\u8981\u8bfb1\u6b21\u78c1\u76d8\u3002\u6548\u7387\u6bd4read/write\u8981\u9ad84\u500d\u3002 \u5982\u679c\u7a0b\u5e8f\u5bf9\u5185\u5b58\u6709\u9650\u5236\uff0c\u5219\u7528read/write\u6bd4\u8f83\u597d\u3002 \u90fd\u7528fread\u00a0\u548cfwrite,\u5b83\u81ea\u52a8\u5206\u914d\u7f13\u5b58,\u901f\u5ea6\u4f1a\u5f88\u5feb,\u6bd4\u81ea\u5df1\u6765\u505a\u8981\u7b80\u5355\u3002\u5982\u679c\u8981\u5904\u7406\u4e00\u4e9b\u7279\u6b8a\u7684\u63cf\u8ff0\u7b26,\u7528read\u00a0\u548cwrite,\u5982\u5957\u63a5\u53e3,\u7ba1\u9053\u4e4b\u7c7b\u7684 \u7cfb\u7edf\u8c03\u7528write\u7684\u6548\u7387\u53d6\u51b3\u4e8e\u4f60buf\u7684\u5927\u5c0f\u548c\u4f60\u8981\u5199\u5165\u7684\u603b\u6570\u91cf\uff0c\u5982\u679cbuf\u592a\u5c0f\uff0c\u4f60\u8fdb\u5165\u5185\u6838\u7a7a\u95f4\u7684\u6b21\u6570\u5927\u589e\uff0c\u6548\u7387\u5c31\u4f4e\u4e0b\u3002\u800cfwrite\u4f1a\u66ff\u4f60\u505a\u7f13\u5b58\uff0c\u51cf\u5c11\u4e86\u5b9e\u9645\u51fa\u73b0\u7684\u7cfb\u7edf\u8c03\u7528\uff0c\u6240\u4ee5\u6548\u7387\u6bd4\u8f83\u9ad8\u3002</p>"},{"location":"%E6%9D%82%E9%A1%B9/","title":"SSH\u670d\u52a1\u7684\u5f00\u542f","text":"<ul> <li>\u5b89\u88c5SSH\u670d\u52a1     <code>sudo apt-get install openssh-server</code></li> <li>\u68c0\u67e5\u670d\u52a1\u662f\u5426\u542f\u52a8     <code>sudo service ssh start</code></li> <li>\u7981\u6b62ssh     <code>sudo systemctl disable --now ssh</code></li> <li>\u5f00\u542fssh     <code>sudo systemctl enable --now ssh</code></li> </ul>"},{"location":"%E6%9D%82%E9%A1%B9/#tftp","title":"TFTP\u670d\u52a1\u5f00\u542f","text":"<ul> <li>\u5b89\u88c5xinetd     <code>sudo apt-get install xinetd</code></li> <li>\u5b89\u88c5 tftp-hpa \u548c tftpd-hpa \u670d\u52a1\u7a0b\u5e8f      <code>sudo apt-get install tftp-hpa tftpd-hpa</code></li> <li>\u4fee\u6539 tftp \u76ee\u5f55\u4e3a TFTP \u670d\u52a1\u5668\u5de5\u4f5c\u76ee\u5f55     <code>sudo vi /etc/default/tftpd-hpa</code> \u4fee\u6539\u6210\u5982\u4e0b</li> </ul> <pre><code>    /etc/default/tftpd-hpa\n\n    TFTP_USERNAME=\"tftp\"\n    TFTP_DIRECTORY=\"/home/whynot/samba/out\"\n    TFTP_ADDRESS=\":69\"\n    TFTP_OPTIONS=\"--secure\"\n</code></pre> <ul> <li>\u914d\u7f6e/etc/ xinetd.d/tftp \u6587\u4ef6\uff0c\u6ca1\u6709\u5c31\u65b0\u5efa</li> </ul> <pre><code>sudo vi /etc/xinetd.d/tftp\n</code></pre> <p>\u4fee\u6539\u6210\u5982\u4e0b</p> <pre><code>servicetftp\n{\n    socket_type = dgram\n\n    wait = yes\n\n    disable = no\n\n    user = root\n\n    protocol = udp\n\n    server = /usr/sbin/in.tftpd\n\n    server_args = -s /home/whynot/samba/out -c\n\n    #log_on_success += PID HOST DURATION\n\n    #log_on_failure += HOST\n\n    per_source = 11\n\n    cps =100 2\n\n    flags =IPv4\n\n}\n</code></pre> <ul> <li>\u91cd\u542f tftpd-hpa xinetd</li> </ul> <pre><code>sudo service tftpd-hpa restart\n\nsudo service xinetd restart\n</code></pre>"},{"location":"%E6%9D%82%E9%A1%B9/#_1","title":"\u914d\u7f51","text":"<pre><code>    //\u914d\u7f6eIP\u5730\u5740\uff0c\u5b50\u7f51\u63a9\u7801\n    ifconfig eth1 192.168.x.x broadcast 192.168.1.255 netmask 255.255.255.0\n\n    ifconfig eth1 up\n\n    ifconfig eth1 down\n\n    //\u914d\u7f6e\u8def\u7531\u8868\n    1.\u6dfb\u52a0\u4e00\u6761\u8def\u7531\uff1aroute add -net destIP netmask \u7f51\u5173\u5730\u5740 dev \u7f51\u5361\n    route add -net 192.168.60.11 netmask 192.168.60.1 dev ens192\n\n    2.\u5220\u9664\u4e00\u6761\u8def\u7531\uff1aroute del -net dest_IP netmask \u7f51\u5173 dev \u7f51\u5361\n    route del -net 192.168.60.11 netmask 192.168.60.1 dev ens192\n\n    //\u5f00\u542f\u4e3b\u673a\u8def\u7531\u8f6c\u53d1\u529f\u80fd\uff08\u628a\u4e3b\u673a\u5f53\u8def\u7531\u5668\uff09\n    echo 1&gt; /proc/sys/net/ipv4/ip_forward\n\n</code></pre>"},{"location":"%E6%9D%82%E9%A1%B9/#vscode","title":"VSCODE\u5feb\u901f\u8bf4\u660e","text":"<ul> <li>\u5b89\u88c5\u63d2\u4ef6koroFileHeader</li> <li>\u5728setting.json\u6587\u4ef6\u52a0\u5165\u5982\u4e0b\u914d\u7f6e</li> </ul> <pre><code>\u00a0 \u00a0 \"fileheader.configObj\": { //\u5feb\u901f\u6dfb\u52a0\u6587\u4ef6\u5934\u90e8\u6ce8\u91ca\u548c\u51fd\u6570\u6ce8\u91ca\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"createFileTime\": true, // \u8bbe\u7f6e\u4e3atrue\u5219\u4e3a\u6587\u4ef6\u65b0\u5efa\u65f6\u5019\u4f5c\u4e3adate\uff0c\u5426\u5219\u6ce8\u91ca\u751f\u6210\u65f6\u95f4\u4e3adate\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"autoAdd\": true, // \u81ea\u52a8\u751f\u6210\u6ce8\u91ca\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"annotationStr\": {\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"head\": \"/*\",\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"middle\": \" * @\",\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"end\": \" */\",\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"use\": true // \u8bbe\u7f6e\u81ea\u5b9a\u4e49\u6ce8\u91ca\u53ef\u7528\n\n\u00a0 \u00a0 \u00a0 \u00a0 },\n\n\u00a0 \u00a0 },\n\n\u00a0 \u00a0 \"fileheader.cursorMode\": { // \u5feb\u901f\u6ce8\u91ca\u51fd\u6570 ctrl+alt+t\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"\", // \u51fd\u6570\u63cf\u8ff0\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"param \": \"\", // \u51fd\u6570\u53c2\u6570\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"return\": \"\", // \u51fd\u6570\u8f93\u51fa\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"Author\": \"fs01\", // \u4f5c\u8005\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"Date\": \"Do not edit\", // \u521b\u5efa\u65f6\u95f4\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"LastEditTime\": \"Do not edit\", // \u6700\u540e\u4e00\u6b21\u4fee\u6539\u7684\u65f6\u95f4\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"LastEditors\": \"fs01\" // \u4fee\u6539\u4eba\u5458\n\n\u00a0 \u00a0 },\n\n\u00a0 \u00a0 \"fileheader.customMade\": { // \u5feb\u901f\u6ce8\u91ca\u6587\u4ef6\u5934\u90e8 ctrl+alt+i\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"Description\": \"\", // \u6587\u4ef6\u63cf\u8ff0\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"Author\": \"fs01\", // \u4f5c\u8005\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"Date\": \"Do not edit\", // \u521b\u5efa\u65f6\u95f4\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"LastEditTime\": \"Do not edit\", // \u6700\u540e\u4e00\u6b21\u4fee\u6539\u7684\u65f6\u95f4\n\n\u00a0 \u00a0 \u00a0 \u00a0 \"LastEditors\": \"fs01\" // \u4fee\u6539\u4eba\u5458\n\n\u00a0 \u00a0 }\n</code></pre>"},{"location":"%E6%9D%82%E9%A1%B9/#ld_library_path","title":"\u6709\u73af\u5883\u53d8\u91cfLD_LIBRARY_PATH\u6307\u5b9a\u7684\u8def\u5f84","text":"<pre><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH/mnt/extsd\n</code></pre> <p>\u6ce8\u610f\uff1aLD_LIBRARY_PATH\u7528\":\"\u5206\u9694\u8def\u5f84</p>"},{"location":"%E6%9D%82%E9%A1%B9/#gdb","title":"GDB","text":"<p>\u8ba9\u590d\u6742\u6570\u636e\u663e\u793a\u66f4\u76f4\u89c2\uff0ceg:\u7ed3\u6784\u4f53</p> <pre><code>set print pretty on\n</code></pre> <p>\u6253\u5370\u6570\u7ec4\u7d22\u5f15</p> <pre><code>set print array-indexes on\n</code></pre> <p>\u5f53\u9700\u8981\u67e5\u770b\u4e00\u6bb5\u8fde\u7eed\u5185\u5b58\u7a7a\u95f4\u7684\u503c\u7684\u65f6\u95f4\uff0c\u53ef\u4ee5\u4f7f\u7528GDB\u7684\u201c@\u201d\u64cd\u4f5c\u7b26\uff0c\u201c@\u201d\u7684\u5de6\u8fb9\u662f\u7b2c\u4e00\u4e2a\u5185\u5b58\u5730\u5740\uff0c\u201c@\u201d\u7684\u53f3\u8fb9\u5219\u662f\u60f3\u67e5\u770b\u5185\u5b58\u7684\u957f\u5ea6\u3002</p> <p>int array = (int ) malloc (len * sizeof (int));</p> <p>\u5728GDB\u8c03\u8bd5\u8fc7\u7a0b\u4e2d\u8fd9\u6837\u663e\u793a\u51fa\u8fd9\u4e2a\u52a8\u6001\u6570\u7ec4\u7684\u503c\uff1a</p> <p>p *array@len</p> <p>\u793a\u4f8b\uff1a</p> <p>(gdb) print p@10 $1 = \"\\000\\001\\002\\003\\004\\005\\006\\a\\b\\t\" (gdb) print (char)p@10 $2 = \"\\000\\001\\002\\003\\004\\005\\006\\a\\b\\t\" (gdb) print (int*)p@10 $3 = {50462976, 117835012, 2312, 0, 0, 0, 1041, 0, 540090416, 540221490} (gdb) </p>"},{"location":"%E6%9D%82%E9%A1%B9/#makefile","title":"Makefile\u9759\u6001\u6a21\u5f0f","text":"<p>\u9759\u6001\u6a21\u5f0f\u53ef\u4ee5\u66f4\u52a0\u5bb9\u6613\u5730\u5b9a\u4e49\u591a\u76ee\u6807\u7684\u89c4\u5219\uff0c\u53ef\u4ee5\u8ba9\u6211\u4eec\u7684\u89c4\u5219\u53d8\u5f97\u66f4\u52a0\u7684\u6709\u5f39\u6027\u548c\u7075\u6d3b\u3002\u6211\u4eec\u8fd8\u662f\u5148\u6765\u770b\u4e00\u4e0b\u8bed\u6cd5\uff1a</p> <pre><code>&lt;targets&gt;: &lt;target-pattern&gt;: &lt;prereq-patterns &gt;  \n\u3000\u3000&lt;commands&gt;  \n...\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u7684target-parrtern\u5b9a\u4e49\u6210\u201c%.o\u201d\uff0c\u610f\u601d\u662f\u6211\u4eec\u7684target\u96c6\u5408\u4e2d\u90fd\u662f\u4ee5\u201c.o\u201d\u7ed3\u5c3e\u7684\uff0c\u800c\u5982\u679c\u6211\u4eec\u7684prereq-parrterns\u5b9a\u4e49\u6210\u201c%.c\u201d\uff0c\u610f\u601d\u662f\u5bf9target-parrtern\u6240\u5f62\u6210\u7684\u76ee\u6807\u96c6\u8fdb\u884c\u4e8c\u6b21\u5b9a\u4e49\uff0c\u5176\u8ba1\u7b97\u65b9\u6cd5\u662f\uff0c\u53d6target-parrtern\u6a21\u5f0f\u4e2d\u7684\u201c%\u201d\uff08\u4e5f\u5c31\u662f\u53bb\u6389\u4e86[.o]\u8fd9\u4e2a\u7ed3\u5c3e\uff09\uff0c\u5e76\u4e3a\u5176\u52a0\u4e0a[.c]\u8fd9\u4e2a\u7ed3\u5c3e\uff0c\u5f62\u6210\u7684\u65b0\u96c6\u5408\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u7684\u201c\u76ee\u6807\u6a21\u5f0f\u201d\u6216\u662f\u201c\u4f9d\u8d56\u6a21\u5f0f\u201d\u4e2d\u90fd\u5e94\u8be5\u6709\u201c%\u201d\u8fd9\u4e2a\u5b57\u7b26\u3002</p>"},{"location":"Linux%E9%A9%B1%E5%8A%A8/Linux%E5%AD%97%E7%AC%A6%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8%E6%A1%86%E6%9E%B6/","title":"1\u3001 \u6846\u67b6\u6a21\u677f","text":"<pre><code>static ssize_t xxx_write(struct file *filp, const char __user*buf, size_t cnt,  loff_t*off_t)\n{\n    //\u5b9e\u73b0\u5177\u4f53\u7684\u64cd\u4f5c\n}\nstatic int xxx_open(struct inode*node, struct file*filp)\n{\n    //\u5177\u4f53\u64cd\u4f5c\n}\n//\u6587\u4ef6\u64cd\u4f5c\u51fd\u6570\u7ed3\u6784\u4f53\uff0cLinux\u901a\u8fc7\u6b64\u7ed3\u6784\u4f53\u8bbf\u95ee\u9a71\u52a8\u7a0b\u5e8f\nstatic struct file_operations op={\n    .owner = THIS_MODULE,\n    .open  = xxx_open,\n    .write = xxx_wrote,\n    //\u9664\u6700\u57fa\u672c\u7684\u8bfb\u5199\u5916\uff0c\u8fd8\u6709\u5176\u5b83\u64cd\u4f5c\u3002\u5982\u9700\u8981\uff0c\u987b\u4e8b\u5148\u5b9e\u73b0\n};\n\n\n\n//\u6a21\u5757\u521d\u59cb\u5316\u51fd\u6570\nstatic int __init XXX_init(void)\n{\n    //\u8bfb\u53d6\u8bbe\u5907\u6811\uff0c\u83b7\u53d6\u5bf9\u5e94\u4fe1\u606f\u548c\u64cd\u4f5c\n    //\u901a\u7528\n    //1\u3001\u7533\u8bf7\u8bbe\u5907\u53f7\n    alloc_chrdev_region();\n    //Major = MAJOR(\u586b\u5165\u5bf9\u5e94\u7684dev_t\u8bbe\u5907\u53f7);  //\u83b7\u53d6\u4e3b\u8bbe\u5907\u53f7\n    //Minor = MINOR(\u586b\u5165\u5bf9\u5e94\u7684dev_t\u8bbe\u5907\u53f7);  //\u83b7\u53d6\u6b21\u8bbe\u5907\u53f7\n\n    //2\u3001\u5c06struct cdev\u7c7b\u578b\u7684\u7ed3\u6784\u4f53\u53d8\u91cf\u548cfile_operations\u7ed3\u6784\u4f53\u8fdb\u884c\u7ed1\u5b9a\n    cdev_init(struct cedv*cdev,const struct file_operation*fops);\n\n    //3\u3001\u5411\u5185\u6838\u6dfb\u52a0\u4e00\u4e2a\u9a71\u52a8\uff0c\u6ce8\u518c\u9a71\u52a8\n    cdev_add();\n    //4\u3001\u521b\u5efa\u7c7b\n    class_create();\n    //5\u3001\u521b\u5efa\u8bbe\u5907\n    device_create();\n}\n\n//\u6a21\u5757\u9000\u51fa\u51fd\u6570\nstatic void __exit xxx_exit()\n{\n    cdev_del();\n\n\u00a0 \u00a0 unregister_chrdev_region();\n\n\u00a0 \u00a0 device_destroy();\n\n\u00a0 \u00a0 class_destroy();\n\u00a0 \u00a0 \n}\n\nmodule_init(XXX_init);\nmodule_exit(xxx_exit);\nMODULE_AUTHOR(\"author_name\");\nMODULE_LICEENSE(\"GPL\");\n</code></pre>"},{"location":"Linux%E9%A9%B1%E5%8A%A8/Linux%E5%AD%97%E7%AC%A6%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8%E6%A1%86%E6%9E%B6/#2api","title":"2\u3001\u5e38\u7528API\u51fd\u6570\u89e3\u6790","text":"<ol> <li>cdev_init</li> <li>cdev_add</li> <li>cdev_del</li> <li>alloc_chrdev_region</li> <li>unregister_chrdev_region</li> <li>class_create</li> <li>class_destroy</li> <li>device_create</li> <li>device_destroy</li> <li>module_init</li> <li>module_exit</li> <li>struct file_operations</li> </ol>"},{"location":"Linux%E9%A9%B1%E5%8A%A8/Linux%E5%AD%97%E7%AC%A6%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8%E6%A1%86%E6%9E%B6/#3","title":"3\u3001\u8fd0\u884c\u6d41\u7a0b","text":""}]}